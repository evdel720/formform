{"version":3,"sources":["webpack/bootstrap a23d9e3b3266ffe098d5","./public/lib/game_view.js","./public/lib/game.js","./public/lib/board.js","./public/lib/piece.js","./public/lib/piece_array.js","./public/lib/timer.js","./public/lib/utils.js","./public/lib/solo_mode.js","./public/lib/html_helper.js"],"names":["document","addEventListener","options","board","getElementById","pieces","main","rotate","flip","instruction","mode","gameMode","colors","Game","$boardNode","$pieces","pieceNum","pieceSets","undefined","pieceMap","pickedPiece","pickedCell","isPlaying","innerHTML","forEach","row","cell","removeAttribute","classList","remove","clearBoard","generatePieceMap","generateRandomPieces","renderBoard","i","length","j","el","removePiece","bind","setAttribute","v","k","appendChild","res","colorIdx","Math","floor","random","p","color","push","action","pieceObject","get","renderPiece","node","piece","currentPiece","ul","createElement","li","e","target","add","style","backgroundColor","pieceSet","Map","pieceOb","pieceNode","pieceClickHandler","set","preventDefault","neighbors","Board","piecesObjects","Array","from","values","generateBoard","cellMap","every","placed","loc","console","log","t","join","window","placeHelper","cursor","pos","put","callback","contains","delete","result","map","shuffledPieces","firstP","pop","piecesArr","movePieceAt","getBestPieceAndPosition","bestPos","bestPiece","len","n","sharedBorder","possibleIndexes","idx","current","newBorder","Piece","randomPiece","sound","play","arr","temp","last","Timer","$timer","init","seconds","interval","timeout","renderTimer","fontSize","innerText","stop","clearInterval","clearTimeout","game","setTimeout","setInterval","tick","setLevelHandler","timer","getElementsByClassName","reset","getGridNode","gridNode","children","findLoc","boardNode","disableInteraction","isWin","lostSound","querySelectorAll","dropHandler","placeSound","wonSound","parentNode","currentPieceNode","currentPieceObject","bLoc","pLoc","topLeft","isValid","placePiece","isWon","setUpMultiMode","SoloMode","generateLevelsAndTimer","levels","text","addChildren","parent","child","createElementWith","tag","id","c","generateBoardDiv","ins","generateRightDiv","right","btns"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/lib/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap a23d9e3b3266ffe098d5","import Game from './game.js';\nimport Timer from './timer.js';\nimport { setLevelHandler, getGridNode, findLoc,\n  disableInteraction, dropHandler,\n  setUpMultiMode } from './utils.js';\n\nimport SoloMode from './solo_mode.js';\n// start with setting up solo mode\n// if user clicks battle,\n// set up multi mode\n// switch back when user click solo\n\n// solo: levels, game, timer,\n// multi: don't know yet\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  let options = {\n    board: document.getElementById('board'),\n    pieces: document.getElementById('pieces'),\n    main: document.getElementById('main'),\n    rotate: document.getElementById('rotate'),\n    flip: document.getElementById('flip'),\n    instruction: document.getElementById('instruction'),\n    mode: document.getElementById('mode'),\n  };\n\n  let gameMode = new SoloMode(options);\n  // let levels = document.getElementById('levels');\n  //\n  // let game = new Game(boardNode, pieces);\n  // let timer = new Timer(document.getElementById('timer'), disableInteraction);\n  //\n  // Array.from(levels.children).forEach((li, idx) => {\n  //   setLevelHandler(game, timer, li, idx);\n  // });\n  //\n  // multi.addEventListener('click', setUpMultiMode);\n  //\n  // document.addEventListener('drop',\n  //   (e) => dropHandler(game, boardNode, timer, e));\n  //\n  // play.addEventListener('click', () => {\n  //   if (game.isPlaying) {\n  //     game.clearBoard();\n  //     timer.stop();\n  //     disableInteraction(game);\n  //   } else {\n  //     play.innerText = \"Quit\";\n  //     levels.classList.add(\"hidden\");\n  //     instruction.classList.add(\"hidden\");\n  //     timer.$timer.classList.remove(\"hidden\");\n  //     rotate.classList.remove(\"hidden\");\n  //     flip.classList.remove(\"hidden\");\n  //     timer.start(game);\n  //     game.play();\n  //   }\n  // });\n  //\n  // document.addEventListener('dragover', (e) => {\n  //   e.preventDefault();\n  // }, false);\n  //\n  // [rotate, flip].forEach((btn) => {\n  //   btn.addEventListener('click', (e) => {\n  //     e.preventDefault();\n  //     if (game && game.pickedPiece) {\n  //       moveSound.play();\n  //       game.movePickedPiece(btn.id);\n  //     }\n  //   });\n  // });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./public/lib/game_view.js","import Board from './board.js';\nimport Piece from './piece.js';\n\nconst colors = ['rgb(162, 72, 151)', 'rgb(238, 89, 139)', 'rgb(126, 205, 199)', 'rgb(34, 193, 228)', 'rgb(45, 49, 108)', 'rgb(246, 180, 205)', 'rgb(245, 143, 51)', 'rgb(226, 35, 63)', 'rgb(250, 235, 62)', 'rgb(189, 214, 93)', 'rgb(241, 122, 128)'];\n\nclass Game {\n  constructor($boardNode, $pieces) {\n    this.$boardNode = $boardNode;\n    this.$pieces = $pieces;\n    this.pieceNum = 4;\n    this.pieceSets = undefined;\n    this.board = undefined;\n    this.pieceMap = undefined;\n    this.pickedPiece = undefined;\n    this.pickedCell = undefined;\n    this.isPlaying = false;\n  }\n\n  clearBoard() {\n    this.$pieces.innerHTML = \"\";\n    this.$boardNode.forEach((row) => {\n      row.forEach((cell) => {\n        cell.removeAttribute('style');\n        cell.classList.remove('filled');\n      });\n    });\n    this.pickedPiece = undefined;\n  }\n\n  play() {\n    // reset all the status and start\n    this.clearBoard();\n    this.isPlaying = true;\n    this.generatePieceMap(this.generateRandomPieces());\n    this.board = new Board(this.pieceMap, this.$boardNode);\n    this.renderBoard();\n  }\n\n  renderBoard() {\n    for (let i=0; i<this.board.board.length; i++) {\n      for (let j=0; j<this.board.board[0].length; j++) {\n        let el = this.$boardNode[i][j];\n        if (this.board.board[i][j] === 1) {\n          el.addEventListener('click', this.board.removePiece.bind(this));\n        }\n        el.setAttribute('class', this.board.board[i][j] === 1 ? 'filled' : \"\");\n      }\n    }\n    this.pieceMap.forEach((v, k) => {\n      this.$pieces.appendChild(k);\n    });\n  }\n\n  generateRandomPieces() {\n    let res = [];\n    let colorIdx = Math.floor(Math.random() * colors.length);\n    for (let i=0; i<this.pieceNum; i++) {\n      let p = new Piece();\n      p.color = colors[(colorIdx + i) % colors.length];\n      res.push(p);\n    }\n    return res;\n  }\n\n  movePickedPiece(action) {\n    let pieceObject = this.pieceMap.get(this.pickedPiece);\n    if (action === \"flip\") {\n      pieceObject.flip();\n    } else {\n      pieceObject.rotate();\n    }\n    this.renderPiece(this.pickedPiece, pieceObject);\n  }\n\n  renderPiece(node, piece) {\n    node.innerHTML = \"\";\n    piece.currentPiece().forEach((row) => {\n      let ul = document.createElement('ul');\n      row.forEach((el) => {\n        let li = document.createElement('li');\n        li.addEventListener('mousedown', (e) => {\n          this.pickedCell = e.target;\n        });\n        li.addEventListener('mouseup', (e) => {\n          this.pickedCell = undefined;\n        });\n        if (el === 1) {\n          li.classList.add(\"filled\");\n          li.style.backgroundColor = piece.color;\n        }\n        ul.appendChild(li);\n      });\n      node.appendChild(ul);\n    });\n  }\n\n  generatePieceMap(pieceSet) {\n    this.pieceMap = new Map();\n    pieceSet.forEach((pieceOb) => {\n      let pieceNode = document.createElement('div');\n      pieceNode.classList.add('piece');\n      pieceNode.setAttribute('draggable', true);\n      this.renderPiece(pieceNode, pieceOb);\n      pieceNode.addEventListener('click', this.pieceClickHandler.bind(this, pieceNode));\n      this.pieceMap.set(pieceNode, pieceOb);\n    });\n  }\n\n  pieceClickHandler(pieceNode, e) {\n    e.preventDefault();\n    if (this.isPlaying === false) { return; }\n    if (this.pickedPiece === pieceNode) {\n      pieceNode.classList.remove('picked');\n      this.pickedPiece = undefined;\n    } else {\n      if (this.pickedPiece) {\n        this.pickedPiece.classList.remove('picked');\n      }\n      pieceNode.classList.add('picked');\n      this.pickedPiece = pieceNode;\n    }\n  }\n}\n\nexport default Game;\n\n\n\n// WEBPACK FOOTER //\n// ./public/lib/game.js","const neighbors = [[-1, 0], [1, 0], [0, -1], [0, 1]];\n\nclass Board {\n  constructor(pieceMap, $boardNode) {\n    this.piecesObjects = Array.from(pieceMap.values());\n    this.pieceMap = pieceMap;\n    this.$boardNode = $boardNode;\n    this.board = this.generateBoard();\n    this.cellMap = new Map();\n  }\n\n  isWon() {\n    return this.piecesObjects.every((p) => p.placed);\n  }\n\n  isValid(pieceOb, loc) {\n    // returns true if the piece can be placed on the location\n    // for testing, logging stuff\n    if (pieceOb.placed || loc[0] < 0 || loc[1] < 0) {\n      console.log(\"piece already placed or location is smaller than 0\");\n      return false;\n    }\n    let piece = pieceOb.currentPiece();\n    for (let i=0; i<piece.length; i++) {\n      for (let j=0; j<piece[0].length; j++) {\n        if (piece[i][j] === 1 && this.board[i+loc[0]][j+loc[1]] !== 1) {\n          // These are for testing!\n          console.log(`piece location: ${i}, ${j}`);\n          console.log(`board location: ${i+loc[0]}, ${j+loc[1]}`);\n          console.log(\"piece:\");\n          piece.forEach((row, t) => {\n            console.log(`${t} ${row.join(\" \")}`);\n          });\n          console.log(\"board:\");\n          this.board.forEach((row, t) => {\n            console.log(`${t} ${row.join(\" \")}`);\n          });\n          window.board = this.board;\n          return false;\n        }\n      }\n    }\n    return true;\n  }\n\n  placePiece(pieceNode, loc) {\n    let pieceOb = this.pieceMap.get(pieceNode);\n    let piece = pieceOb.currentPiece();\n    for (let i=0; i<piece.length; i++) {\n      for (let j=0; j<piece[0].length; j++) {\n        if (piece[i][j] === 1) {\n          this.placeHelper([i+loc[0], j+loc[1]], pieceNode, pieceOb);\n        }\n      }\n    }\n    pieceNode.classList.add(\"hidden\");\n    pieceOb.placed = true;\n  }\n\n  placeHelper(loc, pieceNode, pieceOb) {\n    this.board[loc[0]][loc[1]] = 2;\n    this.$boardNode[loc[0]][loc[1]].style.backgroundColor = pieceOb.color;\n    this.cellMap.set(this.$boardNode[loc[0]][loc[1]], pieceNode);\n    this.$boardNode[loc[0]][loc[1]].classList.add(\"placed-cell\");\n    this.$boardNode[loc[0]][loc[1]].style.cursor = \"pointer\";\n  }\n\n  movePieceAt(pos, board, piece, put, callback) {\n    // put is boolean. if it's true, place piece\n    // if it's false, remove piece from the pos\n    for (let i=0; i<piece.length; i++) {\n      for (let j=0; j<piece[0].length; j++) {\n        if (piece[i][j] === 1) {\n          if (put) {\n            board[i+pos[0]][j+pos[1]]++;\n          } else {\n            board[i+pos[0]][j+pos[1]]--;\n          }\n        }\n      }\n    }\n  }\n\n  removePiece(e) {\n    if (this.isPlaying && e.target.classList.contains(\"placed-cell\")) {\n      let pieceNode = this.board.cellMap.get(e.target);\n      pieceNode.classList.remove(\"hidden\");\n      this.pieceMap.get(pieceNode).placed = false;\n      this.board.$boardNode.forEach((row, i) => {\n        row.forEach((cell, j) => {\n          if (this.board.cellMap.get(cell) === pieceNode) {\n            cell.setAttribute(\"style\", \"\");\n            cell.classList.remove(\"placed-cell\");\n            this.board.board[i][j] = 1;\n            this.board.cellMap.delete(cell);\n          }\n        });\n      });\n    }\n  }\n\n  shuffledPieces() {\n    // shuffles the pieces\n    const result = this.piecesObjects.map((p) => p);\n    for (let i=0; i<result.length; i++) {\n      let j = Math.floor(Math.random() * result.length);\n      [result[i], result[j]] = [result[j], result[i]];\n    }\n    return result;\n  }\n\n  generateBoard() {\n    // TODO more randomize!!\n    let shuffledPieces = this.shuffledPieces();\n    let board = this.$boardNode.map((row) => row.map((cell) => 0));\n    let firstP = shuffledPieces.pop().piecesArr[Math.floor(Math.random() * 8)];\n    // start at the middle\n    let i = Math.floor((board.length - firstP.length) / 2);\n    let j = Math.floor((board[0].length - firstP[0].length) / 2);\n    this.movePieceAt([i, j], board, firstP, true);\n\n    shuffledPieces.forEach((p) => {\n      let [bestPos, bestPiece] = this.getBestPieceAndPosition(board, p);\n      this.movePieceAt(bestPos, board, bestPiece, true);\n    });\n    return board;\n  }\n\n  sharedBorder(pos, board, piece) {\n    let len = 0;\n    for (let i=0; i<piece.length; i++) {\n      for (let j=0; j<piece[0].length; j++) {\n        if (piece[i][j] === 1) {\n          if (board[i+pos[0]][j+pos[1]] === 1) { return -1; }\n          neighbors.forEach((n) => {\n            if (board[n[0]+i+pos[0]] !== undefined && board[n[0]+i+pos[0]][n[1]+j+pos[1]] === 1) {\n              len++;\n            }\n          });\n        }\n      }\n    }\n    return len;\n  }\n\n  getBestPieceAndPosition(board, piece) {\n    // get the best possible position by running through\n    // all possible combination\n    let sharedBorder = -1;\n    let bestPos = [];\n    let bestPiece = [];\n    piece.possibleIndexes.forEach((idx) => {\n      let current = piece.piecesArr[idx];\n      for (let i=0; i<board.length - current.length; i++) {\n        for (let j=0; j<board[0].length - current[0].length; j++) {\n          let newBorder = this.sharedBorder([i, j], board, current);\n          if (newBorder > sharedBorder) {\n            sharedBorder = newBorder;\n            bestPos = [i, j];\n            bestPiece = current;\n          }\n        }\n      }\n    });\n    return [bestPos, bestPiece];\n  }\n}\n\nexport default Board;\n\n\n\n// WEBPACK FOOTER //\n// ./public/lib/board.js","import pieces from './piece_array.js';\n// prepopulate all the pieces in piece_array.js\n\n\nclass Piece {\n  constructor(i) {\n    let randomPiece = pieces[Math.floor(Math.random() * pieces.length)];\n    this.piecesArr = randomPiece.piecesArr;\n    this.possibleIndexes = randomPiece.possibleIndexes;\n    this.idx = 0;\n    this.placed = false;\n    this.sound = document.getElementById('move-sound');\n  }\n\n  currentPiece() {\n    return this.piecesArr[this.idx];\n  }\n\n  rotate() {\n    this.sound.play();\n    if (this.idx < 4) {\n      this.idx = (this.idx + 1) % 4;\n    } else {\n      this.idx = (this.idx + 1) % 8 || 4;\n    }\n  }\n\n  flip() {\n    this.sound.play();\n    this.idx = (this.idx + 4) % 8;\n  }\n}\n\nexport default Piece;\n\n\n\n// WEBPACK FOOTER //\n// ./public/lib/piece.js","const rotate = (arr) => {\n  let res = [];\n  for (let j=0; j<arr[0].length; j++) {\n    let temp = [];\n    for (let i=arr.length - 1; i>=0; i--) {\n      temp.push(arr[i][j]);\n    }\n    res.push(temp);\n  }\n  return res;\n};\n\nconst flip = (arr) => {\n  let res = [];\n  arr.forEach((row) => {\n    let temp = [];\n    for (let i=row.length - 1; i>=0; i--) {\n      temp.push(row[i]);\n    }\n    res.push(temp);\n  });\n  return res;\n};\n// in 12 pieces, 5 pieces shares same shape in rotation\n// 1 piece has same for all\n// [...[piece arr], [indexs of things that doesn't change]]\n// in 0 to 7 indexs\nconst pieces = [\n  [[1, 1, 1], [0, 1, 0], -1],\n  [[1, 1], [1, 1], [0]],\n  [[1, 1, 1], [0, 1]],\n  [[1, 1], [0, 1]],\n  [[1, 1, 1, 1], [0, 1]],\n  [[1, 1], [1, 0], -1],\n  [[1, 1, 1], [1, 1, 0], -1],\n  [[1, 1, 1], [1, 0, 0], -1],\n  [[1, 0, 0], [1, 1, 1], [0, 0, 1], [0, 1, 4, 5]],\n  [[1, 1, 1, 1], [0, 1, 0, 0], -1],\n  [[1, 1, 0], [0, 1, 1], [0, 1, 4, 5]],\n  [[1, 1, 1, 1], [1, 0, 0, 0], -1]\n];\n\nexport default pieces.map((p, idx) => {\n  const piece = {};\n  const last = p.pop();\n  piece.possibleIndexes = last === -1 ? [0, 1, 2, 3, 4, 5, 6, 7] : last;\n  piece.piecesArr = [p];\n  for (let i=0; i<3; i++) {\n    piece.piecesArr.push(rotate(piece.piecesArr[i]));\n  }\n  for (let i=0; i<4; i++) {\n    piece.piecesArr.push(flip(piece.piecesArr[i]));\n  }\n  return piece;\n});\n\n\n\n// WEBPACK FOOTER //\n// ./public/lib/piece_array.js","class Timer {\n  constructor($timer, callback) {\n    this.$timer = $timer;\n    this.init = 60;\n    this.seconds = this.init;\n    this.interval = undefined;\n    this.timeout = undefined;\n    this.callback = callback;\n    this.renderTimer();\n  }\n\n  renderTimer() {\n    if (this.seconds === 10) {\n      this.$timer.style.color = \"#F00\";\n      this.$timer.style.fontSize = \"45px\";\n    }\n    this.$timer.innerText = this.seconds;\n  }\n\n  reset(seconds) {\n    this.init = seconds;\n    this.seconds = seconds;\n    this.renderTimer();\n  }\n\n  tick() {\n    this.seconds--;\n    this.renderTimer();\n    if (this.seconds === 0) {\n      this.stop();\n    }\n  }\n\n  stop() {\n    window.clearInterval(this.interval);\n    window.clearTimeout(this.timeout);\n    this.seconds = this.init;\n  }\n\n  start(game) {\n    this.$timer.style.color = '#000';\n    this.$timer.style.fontSize = \"30px\";\n    if (game.isPlaying) {\n      this.stop();\n    }\n    this.renderTimer();\n    this.timeout = window.setTimeout(() =>  this.callback(game), this.init * 1000);\n    this.interval = window.setInterval(this.tick.bind(this), 1000);\n  }\n}\n\nexport default Timer;\n\n\n\n// WEBPACK FOOTER //\n// ./public/lib/timer.js","const setLevelHandler = (game, timer, li, idx) => {\n  li.addEventListener('click', () => {\n    if (!game.isPlaying) {\n      document.getElementsByClassName('selected-level')[0].classList.remove('selected-level');\n      li.classList.add('selected-level');\n      game.pieceNum = idx + 4;\n      timer.reset((idx + 1) * 60);\n    }\n  });\n};\n\nconst getGridNode = (gridNode) => {\n  return Array.from(gridNode.children).map((row) => Array.from(row.children));\n};\n\n\nconst findLoc = (boardNode, cell) => {\n  for (let i=0; i<boardNode.length; i++) {\n    for (let j=0; j<boardNode[0].length; j++) {\n      if (boardNode[i][j] === cell) {\n        return [i, j];\n      }\n    }\n  }\n};\n\nconst disableInteraction = (game, isWin) => {\n  let lostSound = document.getElementById('lost-sound');\n  if (!isWin) {\n    lostSound.play();\n  }\n  game.isPlaying = false;\n  if (game.pickedPiece) {\n    game.pickedPiece.classList.remove('picked');\n  }\n  document.getElementById('play').innerText = \"Play\";\n  document.getElementById('timer').classList.add('hidden');\n  document.getElementById('rotate').classList.add('hidden');\n  document.getElementById('flip').classList.add('hidden');\n  document.getElementById('levels').classList.remove('hidden');\n  document.querySelectorAll('#board li.filled').forEach((cell) => {\n    cell.style.cursor = \"default\";\n    if (!isWin) {\n      cell.style.backgroundColor = \"#AAA\";\n    }\n  });\n\n  document.querySelectorAll('#pieces li.filled').forEach((cell) => {\n    if (!isWin) {\n      cell.style.backgroundColor = \"#AAA\";\n    }\n  });\n\n  document.querySelectorAll('#pieces > *').forEach((piece) => {\n    piece.style.cursor = \"default\";\n    piece.setAttribute('draggable', false);\n  });\n};\n\nconst dropHandler = (game, boardNode, timer, e) => {\n  let placeSound = document.getElementById('place-sound');\n  let wonSound = document.getElementById('won-sound');\n  e.preventDefault();\n  if (e.target.parentNode.classList &&\n    e.target.parentNode.classList.contains(\"dropzone\") &&\n      game && game.isPlaying && game.pickedCell) {\n    let currentPieceNode = game.pickedCell.parentNode.parentNode;\n    let currentPieceObject = game.pieceMap.get(currentPieceNode);\n    let bLoc = findLoc(boardNode, e.target);\n    let pLoc = findLoc(getGridNode(currentPieceNode), game.pickedCell);\n    let topLeft = [bLoc[0] - pLoc[0], bLoc[1] - pLoc[1]];\n    if (game.board.isValid(currentPieceObject, topLeft)) {\n      game.board.placePiece(currentPieceNode, topLeft);\n      if (game.board.isWon()) {\n        wonSound.play();\n        disableInteraction(game, true);\n        timer.stop();\n      } else {\n        placeSound.play();\n      }\n    }\n  }\n};\n\nconst setUpMultiMode = () => {\n  console.log(\"clicked battle\");\n  // hide timer, levels\n  // change play button ready\n  // put other board right bottom\n  // put the room link as modal until someone comes in\n};\n\n\nexport { setLevelHandler, getGridNode, findLoc,\n        disableInteraction, dropHandler, setUpMultiMode };\n\n\n\n// WEBPACK FOOTER //\n// ./public/lib/utils.js","import { addChildren, createElementWith,\n  generateBoardDiv, generateRightDiv } from './html_helper.js';\nimport Game from './game.js';\nimport Timer from './timer.js';\nimport { setLevelHandler, getGridNode, findLoc,\n  disableInteraction, dropHandler,\n  setUpMultiMode } from './utils.js';\n\nclass SoloMode {\n  constructor() {\n    this.generateLevelsAndTimer();\n\n  }\n\n  generateLevelsAndTimer() {\n    this.levels = createElementWith('ul', 'levels');\n    ['Easy', 'Medium', 'Hard'].forEach((text, i) => {\n      let li = createElementWith('li', null, text);\n      if (!i) { li.classList.add('selected-level'); }\n      this.levels.appendChild(li);\n    });\n    let timer = createElementWith('h3', 'timer', null, ['hidden']);\n    this.timer = new Timer(timer, disableInteraction);\n    \n  }\n}\n\nexport default SoloMode;\n\n\n\n// WEBPACK FOOTER //\n// ./public/lib/solo_mode.js","const addChildren = (parent, children) => {\n  children.forEach((child) => {\n    parent.appendChild(child);\n  });\n};\n\nconst createElementWith = (tag, id, text, classList = []) => {\n  let el = document.createElement(tag);\n  if (id) { el.id = id; }\n  if (text) { el.innerText = text; }\n  classList.forEach((c) => {\n    el.classList.add(c);\n  });\n  return el;\n};\n\nconst generateBoardDiv = (ins) => {\n  let board = createElementWith('div', 'board');\n  let boardNode = [];\n  for (let i=0; i<8; i++) {\n    let ul = createElementWith('ul', null, null, ['dropzone']);\n    let temp = [];\n    for (let j=0; j<8; j++) {\n      let li = document.createElement('li');\n      ul.appendChild(li);\n      temp.push(li);\n    }\n    boardNode.push(temp);\n    board.appendChild(ul);\n  }\n  ins.boardNode = boardNode;\n  return board;\n};\n\nconst generateRightDiv = (ins) => {\n  let right = createElementWith('div', null, null, ['right']);\n  let btns = createElementWith('div', null, null, ['btns']);\n  ins.rotate = createElementWith('button', 'rotate', \"Rotate\", ['hidden']);\n  ins.flip = createElementWith('button', 'flip', \"Flip\", ['hidden']);\n  addChildren(btns, [ins.rotate, ins.flip]);\n  ins.pieces = createElementWith('div', 'pieces');\n  addChildren(right, [btns, ins.pieces]);\n  return right;\n};\n\nexport { addChildren, createElementWith,\n  generateBoardDiv, generateRightDiv };\n\n\n\n// WEBPACK FOOTER //\n// ./public/lib/html_helper.js"],"sourceRoot":""}