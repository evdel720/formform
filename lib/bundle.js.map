{"version":3,"sources":["webpack/bootstrap b438a697372f3dede844","./lib/game_view.js","./lib/game.js","./lib/board.js","./lib/piece.js","./lib/piece_array.js","./lib/timer.js"],"names":["findLoc","grid","cell","children","childNodes","i","length","j","item","disableInteraction","game","pieces","levels","isWin","board","boardNode","forEach","row","style","cursor","classList","contains","backgroundColor","piece","setAttribute","isPlaying","display","document","addEventListener","getElementById","play","rotate","flip","level","seconds","timer","placeSound","moveSound","instruction","Array","from","li","idx","getElementsByClassName","remove","add","reset","e","preventDefault","target","parentNode","pickedCell","currentPieceNode","currentPieceObject","pieceMap","get","bLoc","pLoc","topLeft","isValid","placePiece","isWon","stop","innerHTML","start","window","setTimeout","pickedPiece","rotatePickedPiece","flipPickedPiece","colors","Game","$board","$pieces","pieceNum","pieceSets","generateRandomPieces","undefined","dice","Math","floor","random","generatePieceMap","rollDice","renderBoard","setBoardNode","line","createElement","el","removePiece","bind","appendChild","v","k","res","set","colorIdx","p","color","push","pieceObject","renderPiece","node","currentPiece","temp","pieceSet","Map","neighbors","Board","piecesArr","values","generateBoard","cellMap","map","every","placed","shuffledPieces","ob","flipped","combineTwo","pieceOb","loc","console","log","pieceNode","placeHelper","delete","result","Boolean","round","a","b","makeEmptyGridWith","bestPos","getBestPosition","trimZero","col","some","pop","c","r","newBorder","x","y","getBorderLength","borderLen","processPositionAt","arr","len","n","Piece","pieceArr","default","Timer","$timer","renderTimer","interval","tick","innerText","clearInterval","setInterval"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/lib/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap b438a697372f3dede844","import Game from './game.js';\nimport Timer from './timer.js';\n\nconst findLoc = (grid, cell) => {\n  let children = grid.childNodes;\n  for (let i=0; i<children.length; i++) {\n    for (let j=0; j<children.item(0).childNodes.length; j++) {\n      if (children.item(i).childNodes.item(j) === cell) {\n        return [i, j];\n      }\n    }\n  }\n};\n\nconst disableInteraction = (game, pieces, levels, isWin) => {\n  game.board.boardNode.forEach((row) => {\n    row.forEach((cell) => {\n      cell.style.cursor = \"default\";\n      if (!isWin && cell.classList.contains(\"filled\")) {\n        cell.style.backgroundColor = \"#CCC\";\n      }\n    });\n  });\n  pieces.childNodes.forEach((piece) => {\n    piece.childNodes.forEach((row) => {\n      row.childNodes.forEach((cell) => {\n        if (!isWin && cell.classList.contains(\"filled\")) {\n          cell.style.backgroundColor = \"#CCC\";\n        }\n      });\n    });\n    piece.style.cursor = \"default\";\n    piece.setAttribute('draggable', false);\n  });\n  game.isPlaying = false;\n  levels.style.display = \"flex\";\n};\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  let board = document.getElementById('board');\n  let pieces = document.getElementById('pieces');\n  let play = document.getElementById('play');\n  let rotate = document.getElementById('rotate');\n  let flip = document.getElementById('flip');\n  let levels = document.getElementById('levels');\n  let level = 4;\n  let seconds = 60;\n  let game = new Game(board, pieces, level);\n  let timer = new Timer(document.getElementById('timer'), seconds);\n  let placeSound = document.getElementById('place-sound');\n  let moveSound = document.getElementById('move-sound');\n  let instruction = document.getElementById('instruction');\n\n  Array.from(levels.children).forEach((li, idx) => {\n    li.addEventListener('click', () => {\n      if (!game.isPlaying) {\n        document.getElementsByClassName('selected-level')[0].classList.remove('selected-level');\n        li.classList.add('selected-level');\n        level = idx + 4;\n        seconds = (idx + 1) * 60;\n        timer.reset(seconds);\n      }\n    });\n  });\n\n  document.addEventListener('drop', (e) => {\n    e.preventDefault();\n    if (e.target.parentNode.classList &&\n      e.target.parentNode.classList.contains(\"dropzone\") &&\n        game && game.board && game.pickedCell) {\n      let currentPieceNode = game.pickedCell.parentNode.parentNode;\n      let currentPieceObject = game.pieceMap.get(currentPieceNode);\n      let bLoc = findLoc(board, e.target);\n      let pLoc = findLoc(currentPieceNode, game.pickedCell);\n      let topLeft = [bLoc[0] - pLoc[0], bLoc[1] - pLoc[1]];\n      if (game.board.isValid(currentPieceObject, topLeft)) {\n        currentPieceNode.classList.add(\"placed-piece\");\n        game.board.placePiece(currentPieceNode, currentPieceObject, topLeft);\n        placeSound.play();\n        if (game.board.isWon()) {\n          // change pieces to non-draggable\n          disableInteraction(game, pieces, levels, true);\n          timer.stop();\n          // ask play again\n        }\n      }\n    }\n  });\n\n  document.addEventListener('dragover', (e) => {\n    e.preventDefault();\n  }, false);\n\n  play.addEventListener('click', () => {\n    board.innerHTML = \"\";\n    pieces.innerHTML = \"\";\n    game = new Game(board, pieces, level);\n    levels.style.display = \"none\";\n    instruction.style.display = \"none\";\n    timer.stop();\n    timer.reset(seconds);\n    timer.start();\n    window.setTimeout(() => {\n      // disable interaction if the game is still in playing when the timer goes off\n      if (timer.seconds === 0) {\n        disableInteraction(game, pieces, levels);\n      }\n    }, seconds * 1000);\n    game.play();\n  });\n\n  rotate.addEventListener('click', (e) => {\n    e.preventDefault();\n    if (game && game.pickedPiece) {\n      moveSound.play();\n      game.rotatePickedPiece();\n    }\n  });\n\n  flip.addEventListener('click', (e) => {\n    e.preventDefault();\n    if (game && game.pickedPiece) {\n      moveSound.play();\n      game.flipPickedPiece();\n    }\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./lib/game_view.js","import Board from './board.js';\nimport Piece from './piece.js';\n\nconst colors = ['rgb(162, 72, 151)', 'rgb(238, 89, 139)', 'rgb(126, 205, 199)', 'rgb(34, 193, 228)', 'rgb(45, 49, 108)', 'rgb(246, 180, 205)', 'rgb(245, 143, 51)', 'rgb(226, 35, 63)', 'rgb(250, 235, 62)', 'rgb(189, 214, 93)', 'rgb(241, 122, 128)'];\n\nclass Game {\n  constructor($board, $pieces, level) {\n    this.$board = $board;\n    this.$pieces = $pieces;\n    this.pieceNum = level;\n    this.pieceSets = this.generateRandomPieces();\n    this.board = undefined;\n    this.dice = undefined;\n    this.pieceMap = undefined;\n    this.pickedPiece = undefined;\n    this.pickedCell = undefined;\n    this.isPlaying = false;\n  }\n\n  rollDice() {\n    this.dice = Math.floor(Math.random() * 6);\n    this.generatePieceMap(this.pieceSets[this.dice]);\n    this.board = new Board(this.pieceMap);\n  }\n\n  play() {\n    this.isPlaying = true;\n    this.rollDice();\n    this.renderBoard();\n    this.board.setBoardNode(this.$board);\n  }\n\n  renderBoard() {\n    this.board.board.forEach((row) => {\n      let line = document.createElement('ul');\n      line.classList.add('row', 'dropzone');\n      row.forEach((el) => {\n        let item = document.createElement('li');\n        item.addEventListener('click', this.board.removePiece.bind(this));\n        if (el === 1) {\n          item.classList.add('filled');\n        }\n        line.appendChild(item);\n      });\n      this.$board.appendChild(line);\n    });\n\n    this.pieceMap.forEach((v, k) => {\n      this.$pieces.appendChild(k);\n    });\n  }\n\n  generateRandomPieces() {\n    // returns 6 sets of piece arrays\n    let res = [];\n    for (let i=0; i<6; i++) {\n      let set = [];\n      let colorIdx = Math.floor(Math.random() * colors.length);\n      for (let j=0; j<this.pieceNum; j++) {\n        let p = new Piece();\n        p.color = colors[(colorIdx + j) % colors.length];\n        set.push(p);\n      }\n      res.push(set);\n    }\n    return res;\n  }\n\n  rotatePickedPiece() {\n    let pieceObject = this.pieceMap.get(this.pickedPiece);\n    pieceObject.rotate();\n    this.renderPiece(this.pickedPiece, pieceObject);\n  }\n\n  flipPickedPiece() {\n    let pieceObject = this.pieceMap.get(this.pickedPiece);\n    pieceObject.flip();\n    this.renderPiece(this.pickedPiece, pieceObject);\n  }\n\n  renderPiece(node, piece) {\n    node.innerHTML = \"\";\n    piece.currentPiece().forEach((row) => {\n      let temp = document.createElement('ul');\n      temp.classList.add('row');\n      row.forEach((el) => {\n        let item = document.createElement('li');\n        item.addEventListener('mousedown', (e) => {\n          this.pickedCell = e.target;\n        });\n        item.addEventListener('mouseup', (e) => {\n          this.pickedCell = undefined;\n        });\n        if (el === 1) {\n          item.classList.add('filled');\n          item.style.backgroundColor = piece.color;\n        }\n        temp.appendChild(item);\n      });\n      node.appendChild(temp);\n    });\n  }\n\n  generatePieceMap(pieceSet) {\n    this.pieceMap = new Map();\n    pieceSet.forEach((p) => {\n      let piece = document.createElement('div');\n      piece.classList.add('piece');\n      piece.setAttribute('draggable', true);\n      this.renderPiece(piece, p);\n      piece.addEventListener('click', () => {\n        if (this.isPlaying === false) { return; }\n        if (this.pickedPiece === piece) {\n          piece.classList.remove('picked');\n          this.pickedPiece = undefined;\n        } else {\n          if (this.pickedPiece) {\n            this.pickedPiece.classList.remove('picked');\n          }\n          piece.classList.add('picked');\n          this.pickedPiece = piece;\n        }\n      });\n      this.pieceMap.set(piece, p);\n    });\n  }\n}\n\nexport default Game;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/game.js","\nconst neighbors = [[-1, 0], [1, 0], [0, -1], [0, 1]];\n\nclass Board {\n  constructor(pieceMap) {\n    this.piecesArr = Array.from(pieceMap.values());\n    this.pieceMap = pieceMap;\n    this.board = this.generateBoard();\n    this.boardNode = undefined;\n    this.cellMap = new Map();\n  }\n\n  setBoardNode($board) {\n    this.boardNode = Array.from($board.childNodes).map((row) => row.childNodes);\n  }\n\n  isWon() {\n    return this.piecesArr.every((p) => p.placed);\n  }\n\n  generateBoard() {\n    // returns the most dense board possible\n    let shuffledPieces = this.shuffledPieces();\n    let board = undefined;\n    // make the board as normal 2D array\n    shuffledPieces.forEach((p) => {\n      let ob = this.piecesArr[p.piece];\n      let currentPiece = ob.piece[p.flipped ? \"flipped\" : \"default\"][p.idx];\n      if (board === undefined) {\n        board = currentPiece;\n      } else {\n        board = this.combineTwo(board, currentPiece);\n      }\n    });\n    return board;\n  }\n\n  isValid(pieceOb, loc) {\n    // returns true if the piece can be placed on the location\n    // for testing, logging stuff\n    if (pieceOb.placed || loc[0] < 0 || loc[1] < 0) {\n      console.log(\"piece already placed, location is smaller than 0\");\n      return false;\n    }\n    let piece = pieceOb.currentPiece();\n    for (let i=0; i<piece.length; i++) {\n      for (let j=0; j<piece[0].length; j++) {\n        if (piece[i][j] === 1 && this.board[i+loc[0]][j+loc[1]] !== 1) {\n          // These are for testing!\n          console.log(`piece ${i}, ${j} is filled`);\n          console.log(`but board i=${i+loc[0]}, j=${j+loc[1]} is ${this.board[i+loc[0]][j+loc[1]]}`);\n          window.board = this.board;\n          return false;\n        }\n      }\n    }\n    return true;\n  }\n\n  placePiece(pieceNode, pieceOb, loc) {\n    let piece = pieceOb.currentPiece();\n    for (let i=0; i<piece.length; i++) {\n      for (let j=0; j<piece[0].length; j++) {\n        if (piece[i][j] === 1) {\n          this.board[i+loc[0]][j+loc[1]] = 2;\n          this.placeHelper([i+loc[0], j+loc[1]], pieceNode, pieceOb);\n        }\n      }\n    }\n    pieceOb.placed = true;\n  }\n\n  placeHelper(loc, pieceNode, pieceOb) {\n    this.cellMap.set(this.boardNode[loc[0]][loc[1]], pieceNode);\n    this.boardNode[loc[0]][loc[1]].classList.add(\"placed-cell\");\n    this.boardNode[loc[0]][loc[1]].style.backgroundColor = pieceOb.color;\n    this.boardNode[loc[0]][loc[1]].style.cursor = \"pointer\";\n  }\n\n  removePiece(e) {\n    if (this.isPlaying && e.target.classList.contains(\"placed-cell\")) {\n      let pieceNode = this.board.cellMap.get(e.target);\n      pieceNode.classList.remove(\"placed-piece\");\n      this.pieceMap.get(pieceNode).placed = false;\n      this.board.boardNode.forEach((row, i) => {\n        row.forEach((cell, j) => {\n          if (this.board.cellMap.get(cell) === pieceNode) {\n            cell.setAttribute(\"style\", \"\");\n            cell.classList.remove(\"placed-cell\");\n            this.board.board[i][j] = 1;\n            this.board.cellMap.delete(cell);\n          }\n        });\n      });\n    }\n  }\n\n  shuffledPieces() {\n    // shuffles the pieces\n    let result = this.piecesArr.map((p, i) => {\n      let ob = {piece: i};\n      ob.idx = Math.floor(Math.random() * 4);\n      ob.flipped = Boolean(Math.round(Math.random()));\n      return ob;\n    });\n    for (let i=0; i<result.length; i++) {\n      let j = Math.floor(Math.random() * result.length);\n      [result[i], result[j]] = [result[j], result[i]];\n    }\n    return result;\n  }\n\n  combineTwo(a, b) {\n    // combine two pieces for the best result\n    let res = this.makeEmptyGridWith(a, b);\n    // move the b block around and save that position if\n    // it makes shorter border length\n    let bestPos = this.getBestPosition(res, a, b);\n    // put b block in the best position\n    for (let i=0; i<b.length; i++) {\n      for (let j=0; j<b[0].length; j++) {\n        res[bestPos[0]+i][bestPos[1]+j] += b[i][j];\n      }\n    }\n    return this.trimZero(res);\n  }\n\n  makeEmptyGridWith(a, b) {\n    let res = [];\n    // make new empty grid\n    for (let i=0; i<a.length + b.length; i++) {\n      let temp = [];\n      for (let j=0; j<a[0].length + b[0].length; j++) {\n        if (i < a.length && j < a[0].length) {\n          temp[j] = a[i][j];\n        } else {\n          temp[j] = 0;\n        }\n      }\n      res.push(temp);\n    }\n    return res;\n  }\n\n  trimZero(grid) {\n    // return the zero trimmed grid\n    // trim zeroes\n    let row = false, col = false;\n    while (!row || !col) {\n      row = grid[grid.length-1].some((el) => el !== 0);\n      if (!row) { grid.pop(); }\n      col = grid.map((c) => c[c.length-1]).some((el) => el !== 0);\n      if (!col) { grid.forEach((r) => r.pop()); }\n    }\n    return grid;\n  }\n\n  processPositionAt(res, b, i, j) {\n    // returns the new borderLen / false\n    let newBorder = true;\n    // put b piece on the board\n    for (let x=0; x<b.length; x++) {\n      for (let y=0; y<b[0].length; y++) {\n        res[i + x][j + y] += b[x][y];\n        if (res[i + x][j + y] > 1) { newBorder = false; }\n      }\n    }\n    if (newBorder) { newBorder = Board.getBorderLength(res); }\n    // change that back to just have a piece\n    for (let x=0; x<b.length; x++) {\n      for (let y=0; y<b[0].length; y++) {\n        res[i + x][j + y] -= b[x][y];\n      }\n    }\n    return newBorder;\n  }\n\n  getBestPosition(res, a, b) {\n    let bestPos, borderLen;\n    for (let i=0; i<=res.length - b.length; i++) {\n      for (let j=0; j<=res[0].length - b[0].length; j++) {\n        let newBorder = this.processPositionAt(res, b, i, j);\n        if (!newBorder) { continue; }\n        if (!borderLen || newBorder < borderLen) {\n          borderLen = newBorder;\n          bestPos = [i, j];\n        }\n      }\n    }\n    return bestPos;\n  }\n\n  static getBorderLength(arr) {\n    // returns the piece's length of border\n    let len = 0;\n    for (let i=0; i<arr.length; i++) {\n      for (let j=0; j<arr[0].length; j++) {\n        if (arr[i][j] === 1) {\n          for (let n=0; n<4; n++) {\n            let [x, y] = neighbors[n];\n            if (arr[x+i] && arr[x+i][y+j] === 1) { continue; }\n            len++;\n          }\n        }\n      }\n    }\n    return len;\n  }\n}\n\nexport default Board;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/board.js","import pieces from './piece_array.js';\n// prepopulate all the pieces in piece_array.js\n\n\nclass Piece {\n  constructor() {\n    this.piece = pieces[Math.floor(Math.random() * pieces.length)];\n    this.idx = 0;\n    this.flipped = false;\n    this.placed = false;\n  }\n\n  currentPiece() {\n    let pieceArr = this.flipped ? this.piece.flipped : this.piece.default;\n    return pieceArr[this.idx];\n  }\n\n  rotate() {\n    this.idx = (this.idx + 1) % 4;\n  }\n\n  flip() {\n    // flip the piece\n    this.flipped = !this.flipped;\n  }\n}\n\nexport default Piece;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/piece.js","const rotate = (arr) => {\n  let res = [];\n  for (let j=0; j<arr[0].length; j++) {\n    let temp = [];\n    for (let i=arr.length - 1; i>=0; i--) {\n      temp.push(arr[i][j]);\n    }\n    res.push(temp);\n  }\n  return res;\n};\n\nconst flip = (arr) => {\n  let res = [];\n  arr.forEach((row) => {\n    let temp = [];\n    for (let i=row.length - 1; i>=0; i--) {\n      temp.push(row[i]);\n    }\n    res.push(temp);\n  });\n  return res;\n};\n\nconst pieces = [\n  [[1, 1, 1], [0, 1, 0]],\n  [[1, 1], [1, 1]],\n  [[1, 1, 1]],\n  [[1, 1]],\n  [[1, 1, 1, 1]],\n  [[1, 1], [1, 0]],\n  [[1, 1, 1], [1, 1, 0]],\n  [[1, 1, 1], [1, 0, 0]],\n  [[1, 0, 0], [1, 1, 1], [0, 0, 1]],\n  [[1, 1, 1, 1], [0, 1, 0, 0]],\n  [[1, 1, 0], [0, 1, 1]],\n  [[1, 1, 1, 1], [1, 0, 0, 0]]\n];\n\nexport default pieces.map((p, idx) => {\n  let piece = {};\n  piece.default = [p];\n  piece.flipped = [flip(p)];\n  for (let i=0; i<3; i++) {\n    piece.default.push(rotate(piece.default[i]));\n    piece.flipped.push(rotate(piece.flipped[i]));\n  }\n  return piece;\n});\n\n\n\n// WEBPACK FOOTER //\n// ./lib/piece_array.js","class Timer {\n  constructor($timer, seconds) {\n    this.$timer = $timer;\n    this.seconds = seconds;\n    this.renderTimer();\n    this.interval = undefined;\n    this.tick = this.tick.bind(this);\n  }\n\n  renderTimer() {\n    this.$timer.innerText = this.seconds;\n  }\n\n  reset(seconds) {\n    this.seconds = seconds;\n    this.renderTimer();\n  }\n\n  tick() {\n    this.seconds--;\n    this.renderTimer();\n    if (this.seconds === 0) {\n      window.clearInterval(this.interval);\n    }\n  }\n\n  stop() {\n    window.clearInterval(this.interval);\n  }\n\n  start() {\n    this.interval = window.setInterval(this.tick, 1000);\n  }\n}\n\nexport default Timer;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/timer.js"],"sourceRoot":""}