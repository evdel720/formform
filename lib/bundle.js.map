{"version":3,"sources":["webpack/bootstrap 9fc293e9901bf761d2c7","./lib/game_view.js","./lib/game.js","./lib/board.js","./lib/piece.js","./lib/piece_array.js"],"names":["document","addEventListener","g","play","Game","pieceNum","pieceSets","generateRandomPieces","board","undefined","dice","res","i","set","j","push","Math","floor","random","rollDice","window","Board","pieceSet","leftPieces","generateBoard","placedPieces","Set","forEach","p","console","log","init","piece","default","result","map","ob","idx","flipped","Boolean","round","length","a","b","shuffledPieces","combineTwo","pieceArr","location","isValid","currentPiece","neighbors","Piece","len","n","x","y","rotate","arr","temp","flip","row","pieces"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/lib/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9fc293e9901bf761d2c7","import Game from './game.js';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  let g = new Game();\n  g.play();\n  \n});\n\n\n\n// WEBPACK FOOTER //\n// ./lib/game_view.js","import Board from './board.js';\nimport Piece from './piece.js';\n\nclass Game {\n  constructor() {\n    this.pieceNum = 4; // 4 = easy, 5 = medium, 6 = hard\n    this.pieceSets = this.generateRandomPieces();\n    this.board = undefined;\n    this.dice = undefined;\n  }\n\n  generateRandomPieces() {\n    // returns 6 sets of piece arrays\n    let res = [];\n    for (let i=0; i<6; i++) {\n      let set = [];\n      for (let j=0; j<this.pieceNum; j++) {\n        set.push(new Piece());\n      }\n      res.push(set);\n    }\n    return res;\n  }\n\n  rollDice() {\n    this.dice = Math.floor(Math.random() * 6);\n    this.board = new Board(this.pieceSets[this.dice]);\n  }\n\n  play() {\n    this.rollDice();\n    window.board = this.board;\n  }\n}\n\nexport default Game;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/game.js","class Board {\n  constructor(pieceSet) {\n    this.leftPieces = pieceSet;\n    this.board = this.generateBoard();\n    this.placedPieces = new Set();\n  }\n\n  display() {\n    this.leftPieces.forEach((p) => {\n      console.log('-----------------');\n      let init = p.piece.default[0];\n      init.forEach((i) => {\n        console.log(i);\n      });\n    });\n  }\n\n  shuffledPieces() {\n    // shuffles the pieces\n    let result = this.leftPieces.map((p, i) => {\n      let ob = {piece: i};\n      ob.idx = Math.floor(Math.random() * 4);\n      ob.flipped = Boolean(Math.round(Math.random()));\n      return ob;\n    });\n    for (let i=0; i<result.length; i++) {\n      let j = Math.floor(Math.random() * result.length);\n      [result[i], result[j]] = [result[j], result[i]];\n    }\n    return result;\n  }\n\n  combineTwo(a, b) {\n    // combine two pieces for the best result\n  }\n\n  generateBoard() {\n    // returns the most dense board possible\n    let shuffledPieces = this.shuffledPieces();\n    let board = undefined;\n    shuffledPieces.forEach((p) => {\n      if (board === undefined) {\n        board = this.leftPieces[p.piece];\n      } else {\n        board = this.combineTwo(board, this.leftPieces[p.piece]);\n      }\n    });\n    return board;\n  }\n\n  isValid(pieceArr, location) {\n    // returns true if the piece can be placed on the location\n  }\n\n  placePiece(piece, location) {\n    if (this.isValid(piece.currentPiece(), location)) {\n      // place piece\n\n    } else {\n      // put the piece to the last position\n    }\n  }\n\n  removePiece(piece) {\n    // remove the piece from the board\n  }\n}\n\nexport default Board;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/board.js","import pieces from './piece_array.js';\n// prepopulate all the pieces in piece_array.js\n\nconst neighbors = [[-1, 0], [1, 0], [0, -1], [0, 1]];\n\nclass Piece {\n  constructor() {\n    this.piece = pieces[Math.floor(Math.random() * pieces.length)];\n    this.idx = 0;\n    this.flipped = false;\n  }\n\n  currentPiece() {\n    let pieceArr = this.flipped ? this.piece.flipped : this.piece.default;\n    return pieceArr[this.idx];\n  }\n\n  rotate() {\n    this.idx = (this.idx + 1) % 4;\n  }\n\n  flip() {\n    // flip the piece\n    this.flipped = !this.flipped;\n  }\n\n  static getBorderLength(pieceArr) {\n    // returns the piece's length of border\n    let len = 0;\n    for (let i=0; i<pieceArr.length; i++) {\n      for (let j=0; j<pieceArr[0].length; j++) {\n        if (pieceArr[i][j] === 1) {\n          for (let n=0; n<4; n++) {\n            let [x, y] = neighbors[n];\n            if (pieceArr[x + i] && pieceArr[x + i][y + j] === 1) {\n              continue;\n            }\n            len++;\n          }\n        }\n      }\n    }\n    return len;\n  }\n}\n\nexport default Piece;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/piece.js","const rotate = (arr) => {\n  let res = [];\n  for (let j=0; j<arr[0].length; j++) {\n    let temp = [];\n    for (let i=arr.length - 1; i>=0; i--) {\n      temp.push(arr[i][j]);\n    }\n    res.push(temp);\n  }\n  return res;\n};\n\nconst flip = (arr) => {\n  let res = [];\n  arr.forEach((row) => {\n    let temp = [];\n    for (let i=row.length - 1; i>=0; i--) {\n      temp.push(row[i]);\n    }\n    res.push(temp);\n  });\n  return res;\n};\n\nconst pieces = [\n  [[1, 1, 1], [0, 1, 0]],\n  [[1, 1], [1, 1]],\n  [[1, 1, 1]],\n  [[1, 1]],\n  [[1, 1, 1, 1]],\n  [[1, 1], [1, 0]],\n  [[1, 1, 1], [1, 1, 0]],\n  [[1, 1, 1], [1, 0, 0]],\n  [[1, 0, 0], [1, 1, 1], [0, 0, 1]],\n  [[1, 1, 1, 1], [0, 1, 0, 0]],\n  [[1, 1, 0], [0, 1, 1]],\n  [[1, 1, 1, 1], [1, 0, 0, 0]]\n];\n\nexport default pieces.map((p, idx) => {\n  let piece = {};\n  piece.default = [p];\n  piece.flipped = [flip(p)];\n  for (let i=0; i<3; i++) {\n    piece.default.push(rotate(piece.default[i]));\n    piece.flipped.push(rotate(piece.flipped[i]));\n  }\n  return piece;\n});\n\n\n\n// WEBPACK FOOTER //\n// ./lib/piece_array.js"],"sourceRoot":""}