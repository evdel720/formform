{"version":3,"sources":["webpack/bootstrap 6fef0578b14027642e38","./lib/game_view.js","./lib/game.js","./lib/board.js","./lib/piece.js","./lib/piece_array.js","./lib/timer.js"],"names":["findLoc","grid","cell","children","childNodes","i","length","j","item","disableInteraction","game","pieces","levels","isWin","board","boardNode","forEach","row","style","cursor","classList","contains","backgroundColor","piece","setAttribute","isPlaying","display","document","addEventListener","getElementById","play","rotate","flip","level","seconds","Array","from","map","timer","placeSound","moveSound","instruction","li","idx","getElementsByClassName","remove","add","reset","e","preventDefault","target","parentNode","pickedCell","currentPieceNode","currentPieceObject","pieceMap","get","bLoc","pLoc","topLeft","isValid","placePiece","isWon","stop","rollDice","btn","pickedPiece","movePickedPiece","id","colors","Game","$boardNode","$pieces","pieceNum","pieceSets","generateRandomPieces","undefined","dice","Math","floor","random","generatePieceMap","renderBoard","el","removePiece","bind","v","k","appendChild","res","set","colorIdx","p","color","push","action","pieceObject","renderPiece","node","innerHTML","currentPiece","ul","createElement","pieceSet","Map","pieceOb","pieceNode","pieceClickHandler","neighbors","Board","piecesObjects","values","generateBoard","cellMap","every","placed","shuffledPieces","firstP","pop","piecesArr","movePieceTo","getBestPieceAndPosition","bestPos","bestPiece","pos","len","n","sharedBorder","possibleIndexes","current","newBorder","loc","console","log","window","placeHelper","delete","result","Piece","randomPiece","arr","temp","last","Timer","$timer","renderTimer","interval","tick","innerText","clearInterval","setInterval"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/lib/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 6fef0578b14027642e38","import Game from './game.js';\nimport Timer from './timer.js';\n\nconst findLoc = (grid, cell) => {\n  let children = grid.childNodes;\n  for (let i=0; i<children.length; i++) {\n    for (let j=0; j<children.item(0).childNodes.length; j++) {\n      if (children.item(i).childNodes.item(j) === cell) {\n        return [i, j];\n      }\n    }\n  }\n};\n\nconst disableInteraction = (game, pieces, levels, isWin) => {\n  game.board.boardNode.forEach((row) => {\n    row.forEach((cell) => {\n      cell.style.cursor = \"default\";\n      if (!isWin && cell.classList.contains(\"filled\")) {\n        cell.style.backgroundColor = \"#CCC\";\n      }\n    });\n  });\n  pieces.childNodes.forEach((piece) => {\n    piece.childNodes.forEach((row) => {\n      row.childNodes.forEach((cell) => {\n        if (!isWin && cell.classList.contains(\"filled\")) {\n          cell.style.backgroundColor = \"#CCC\";\n        }\n      });\n    });\n    piece.style.cursor = \"default\";\n    piece.setAttribute('draggable', false);\n  });\n  game.isPlaying = false;\n  levels.style.display = \"flex\";\n};\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  let board = document.getElementById('board');\n  let pieces = document.getElementById('pieces');\n  let play = document.getElementById('play');\n  let rotate = document.getElementById('rotate');\n  let flip = document.getElementById('flip');\n  let levels = document.getElementById('levels');\n  let level = 4;\n  let seconds = 60;\n  let boardNode = Array.from(board.children).map((row) => Array.from(row.children));\n  let game = new Game(boardNode, pieces, level);\n  let timer = new Timer(document.getElementById('timer'), seconds);\n  let placeSound = document.getElementById('place-sound');\n  let moveSound = document.getElementById('move-sound');\n  let instruction = document.getElementById('instruction');\n\n  Array.from(levels.children).forEach((li, idx) => {\n    li.addEventListener('click', () => {\n      if (!game.isPlaying) {\n        document.getElementsByClassName('selected-level')[0].classList.remove('selected-level');\n        li.classList.add('selected-level');\n        level = idx + 4;\n        seconds = (idx + 1) * 60;\n        timer.reset(seconds);\n      }\n    });\n  });\n\n  document.addEventListener('drop', (e) => {\n    e.preventDefault();\n    if (e.target.parentNode.classList &&\n      e.target.parentNode.classList.contains(\"dropzone\") &&\n        game && game.board && game.pickedCell) {\n      let currentPieceNode = game.pickedCell.parentNode.parentNode;\n      let currentPieceObject = game.pieceMap.get(currentPieceNode);\n      let bLoc = findLoc(board, e.target);\n      let pLoc = findLoc(currentPieceNode, game.pickedCell);\n      let topLeft = [bLoc[0] - pLoc[0], bLoc[1] - pLoc[1]];\n      if (game.board.isValid(currentPieceObject, topLeft)) {\n        currentPieceNode.classList.add(\"placed-piece\");\n        game.board.placePiece(currentPieceNode, currentPieceObject, topLeft);\n        placeSound.play();\n        if (game.board.isWon()) {\n          // change pieces to non-draggable\n          disableInteraction(game, pieces, levels, true);\n          timer.stop();\n          // ask play again\n        }\n      }\n    }\n  });\n\n  document.addEventListener('dragover', (e) => {\n    e.preventDefault();\n  }, false);\n\n  play.addEventListener('click', () => {\n    game.rollDice();\n    game.play();\n    // board.innerHTML = \"\";\n    // pieces.innerHTML = \"\";\n    // game = new Game(board, pieces, level);\n    // levels.style.display = \"none\";\n    // instruction.style.display = \"none\";\n    // timer.stop();\n    // timer.reset(seconds);\n    // timer.start();\n    // window.setTimeout(() => {\n    //   // disable interaction if the game is still in playing when the timer goes off\n    //   if (timer.seconds === 0) {\n    //     disableInteraction(game, pieces, levels);\n    //   }\n    // }, seconds * 1000);\n    // game.play();\n  });\n\n  [rotate, flip].forEach((btn) => {\n    btn.addEventListener('click', (e) => {\n      e.preventDefault();\n      if (game && game.pickedPiece) {\n        moveSound.play();\n        game.movePickedPiece(btn.id);\n      }\n    });\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./lib/game_view.js","import Board from './board.js';\nimport Piece from './piece.js';\n\nconst colors = ['rgb(162, 72, 151)', 'rgb(238, 89, 139)', 'rgb(126, 205, 199)', 'rgb(34, 193, 228)', 'rgb(45, 49, 108)', 'rgb(246, 180, 205)', 'rgb(245, 143, 51)', 'rgb(226, 35, 63)', 'rgb(250, 235, 62)', 'rgb(189, 214, 93)', 'rgb(241, 122, 128)'];\n\nclass Game {\n  constructor($boardNode, $pieces, level) {\n    this.$boardNode = $boardNode;\n    this.$pieces = $pieces;\n    this.pieceNum = level;\n    this.pieceSets = this.generateRandomPieces();\n    this.board = undefined;\n    this.dice = undefined;\n    this.pieceMap = undefined;\n    this.pickedPiece = undefined;\n    this.pickedCell = undefined;\n    this.isPlaying = false;\n  }\n\n  rollDice() {\n    this.dice = Math.floor(Math.random() * 6);\n    this.generatePieceMap(this.pieceSets[this.dice]);\n    this.board = new Board(this.pieceMap, this.$boardNode);\n  }\n\n  play() {\n    this.isPlaying = true;\n    this.rollDice();\n    this.renderBoard();\n  }\n\n  renderBoard() {\n    for (let i=0; i<this.board.board.length; i++) {\n      for (let j=0; j<this.board.board[0].length; j++) {\n        if (this.board.board[i][j] === 1) {\n          let el = this.$boardNode[i][j];\n          el.addEventListener('click', this.board.removePiece.bind(this));\n          el.classList.add('filled');\n        }\n      }\n    }\n    this.pieceMap.forEach((v, k) => {\n      this.$pieces.appendChild(k);\n    });\n  }\n\n  generateRandomPieces() {\n    // returns 6 sets of piece arrays\n    let res = [];\n    for (let i=0; i<6; i++) {\n      let set = [];\n      let colorIdx = Math.floor(Math.random() * colors.length);\n      for (let j=0; j<this.pieceNum; j++) {\n        let p = new Piece();\n        p.color = colors[(colorIdx + j) % colors.length];\n        set.push(p);\n      }\n      res.push(set);\n    }\n    return res;\n  }\n\n  movePickedPiece(action) {\n    let pieceObject = this.pieceMap.get(this.pickedPiece);\n    if (action === \"flip\") {\n      pieceObject.flip();\n    } else {\n      pieceObject.rotate();\n    }\n    this.renderPiece(this.pickedPiece, pieceObject);\n  }\n\n  renderPiece(node, piece) {\n    node.innerHTML = \"\";\n    piece.currentPiece().forEach((row) => {\n      let ul = document.createElement('ul');\n      row.forEach((el) => {\n        let li = document.createElement('li');\n        li.addEventListener('mousedown', (e) => {\n          this.pickedCell = e.target;\n        });\n        li.addEventListener('mouseup', (e) => {\n          this.pickedCell = undefined;\n        });\n        if (el === 1) { li.style.backgroundColor = piece.color; }\n        ul.appendChild(li);\n      });\n      node.appendChild(ul);\n    });\n  }\n\n  generatePieceMap(pieceSet) {\n    this.pieceMap = new Map();\n    pieceSet.forEach((pieceOb) => {\n      let pieceNode = document.createElement('div');\n      pieceNode.classList.add('piece');\n      pieceNode.setAttribute('draggable', true);\n      this.renderPiece(pieceNode, pieceOb);\n      pieceNode.addEventListener('click', this.pieceClickHandler.bind(this, pieceNode));\n      this.pieceMap.set(pieceNode, pieceOb);\n    });\n  }\n\n  pieceClickHandler(pieceNode, e) {\n    e.preventDefault();\n    if (this.isPlaying === false) { return; }\n    if (this.pickedPiece === pieceNode) {\n      pieceNode.classList.remove('picked');\n      this.pickedPiece = undefined;\n    } else {\n      if (this.pickedPiece) {\n        this.pickedPiece.classList.remove('picked');\n      }\n      pieceNode.classList.add('picked');\n      this.pickedPiece = pieceNode;\n    }\n  }\n}\n\nexport default Game;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/game.js","import Piece from './piece.js';\nconst neighbors = [[-1, 0], [1, 0], [0, -1], [0, 1]];\n\n\nclass Board {\n  constructor(pieceMap, $boardNode) {\n    this.piecesObjects = Array.from(pieceMap.values());\n    this.pieceMap = pieceMap;\n    this.$boardNode = $boardNode;\n    this.board = this.generateBoard();\n    this.cellMap = new Map();\n  }\n\n  isWon() {\n    return this.piecesObjects.every((p) => p.placed);\n  }\n\n  generateBoard() {\n    // returns the most dense board possible\n    let shuffledPieces = this.shuffledPieces();\n    let board = this.$boardNode.map((row) => row.map((cell) => 0));\n    // for testing\n    // let firstP = new Piece(8).piecesArr[4];\n    // console.log(firstP);\n    // pick the first piece randomly\n    let firstP = shuffledPieces.pop().piecesArr[Math.floor(Math.random() * 8)];\n    // start at the middle\n    let i = Math.floor((board.length - firstP.length) / 2);\n    let j = Math.floor((board[0].length - firstP[0].length) / 2);\n    this.movePieceTo([i, j], board, firstP);\n    // board.forEach((row, t) => {\n    //   console.log(`${t} ${row.join(\" \")}`);\n    // });\n    // let secondP = new Piece(7);\n    // let [bestPos, bestPiece] = this.getBestPieceAndPosition(board, secondP);\n    // this.movePieceTo(bestPos, board, bestPiece);\n\n    shuffledPieces.forEach((p) => {\n      let [bestPos, bestPiece] = this.getBestPieceAndPosition(board, p);\n      this.movePieceTo(bestPos, board, bestPiece);\n    });\n    return board;\n  }\n\n  movePieceTo(pos, board, piece) {\n    for (let i=0; i<piece.length; i++) {\n      for (let j=0; j<piece[0].length; j++) {\n        if (piece[i][j] === 1) {\n          board[i+pos[0]][j+pos[1]]++;\n        }\n      }\n    }\n  }\n\n  sharedBorder(pos, board, piece) {\n    let len = 0;\n    for (let i=0; i<piece.length; i++) {\n      for (let j=0; j<piece[0].length; j++) {\n        if (piece[i][j] === 1) {\n          if (board[i+pos[0]][j+pos[1]] === 1) { return -1; }\n          neighbors.forEach((n) => {\n            if (board[n[0]+i+pos[0]] !== undefined && board[n[0]+i+pos[0]][n[1]+j+pos[1]] === 1) {\n              len++;\n            }\n          });\n        }\n      }\n    }\n    return len;\n  }\n\n  getBestPieceAndPosition(board, piece) {\n    // get the best possible position by running through\n    // all possible combination\n    let sharedBorder = -1;\n    let bestPos = [];\n    let bestPiece = [];\n    piece.possibleIndexes.forEach((idx) => {\n      let current = piece.piecesArr[idx];\n      for (let i=0; i<board.length - current.length; i++) {\n        for (let j=0; j<board[0].length - current[0].length; j++) {\n          let newBorder = this.sharedBorder([i, j], board, current);\n          if (newBorder > sharedBorder) {\n            sharedBorder = newBorder;\n            bestPos = [i, j];\n            bestPiece = current;\n          }\n        }\n      }\n    });\n    return [bestPos, bestPiece];\n  }\n\n  isValid(pieceOb, loc) {\n    // returns true if the piece can be placed on the location\n    // for testing, logging stuff\n    if (pieceOb.placed || loc[0] < 0 || loc[1] < 0) {\n      console.log(\"piece already placed, location is smaller than 0\");\n      return false;\n    }\n    let piece = pieceOb.currentPiece();\n    for (let i=0; i<piece.length; i++) {\n      for (let j=0; j<piece[0].length; j++) {\n        if (piece[i][j] === 1 && this.board[i+loc[0]][j+loc[1]] !== 1) {\n          // These are for testing!\n          console.log(`piece ${i}, ${j} is filled`);\n          console.log(`but board i=${i+loc[0]}, j=${j+loc[1]} is ${this.board[i+loc[0]][j+loc[1]]}`);\n          window.board = this.board;\n          return false;\n        }\n      }\n    }\n    return true;\n  }\n\n  placePiece(pieceNode, pieceOb, loc) {\n    let piece = pieceOb.currentPiece();\n    for (let i=0; i<piece.length; i++) {\n      for (let j=0; j<piece[0].length; j++) {\n        if (piece[i][j] === 1) {\n          this.board[i+loc[0]][j+loc[1]] = 2;\n          this.placeHelper([i+loc[0], j+loc[1]], pieceNode, pieceOb);\n        }\n      }\n    }\n    pieceOb.placed = true;\n  }\n\n  placeHelper(loc, pieceNode, pieceOb) {\n    this.cellMap.set(this.boardNode[loc[0]][loc[1]], pieceNode);\n    this.boardNode[loc[0]][loc[1]].classList.add(\"placed-cell\");\n    this.boardNode[loc[0]][loc[1]].style.backgroundColor = pieceOb.color;\n    this.boardNode[loc[0]][loc[1]].style.cursor = \"pointer\";\n  }\n\n  removePiece(e) {\n    if (this.isPlaying && e.target.classList.contains(\"placed-cell\")) {\n      let pieceNode = this.board.cellMap.get(e.target);\n      pieceNode.classList.remove(\"placed-piece\");\n      this.pieceMap.get(pieceNode).placed = false;\n      this.board.boardNode.forEach((row, i) => {\n        row.forEach((cell, j) => {\n          if (this.board.cellMap.get(cell) === pieceNode) {\n            cell.setAttribute(\"style\", \"\");\n            cell.classList.remove(\"placed-cell\");\n            this.board.board[i][j] = 1;\n            this.board.cellMap.delete(cell);\n          }\n        });\n      });\n    }\n  }\n\n  shuffledPieces() {\n    // shuffles the pieces\n    const result = this.piecesObjects.map((p) => p);\n    for (let i=0; i<result.length; i++) {\n      let j = Math.floor(Math.random() * result.length);\n      [result[i], result[j]] = [result[j], result[i]];\n    }\n    return result;\n  }\n  //\n  // combineTwo(a, b) {\n  //   // combine two pieces for the best result\n  //   let res = this.makeEmptyGridWith(a, b);\n  //   // move the b block around and save that position if\n  //   // it makes shorter border length\n  //   let bestPos = this.getBestPosition(res, a, b);\n  //   // put b block in the best position\n  //   for (let i=0; i<b.length; i++) {\n  //     for (let j=0; j<b[0].length; j++) {\n  //       res[bestPos[0]+i][bestPos[1]+j] += b[i][j];\n  //     }\n  //   }\n  //   return this.trimZero(res);\n  // }\n  //\n  // makeEmptyGridWith(a, b) {\n  //   let res = [];\n  //   // make new empty grid\n  //   for (let i=0; i<a.length + b.length; i++) {\n  //     let temp = [];\n  //     for (let j=0; j<a[0].length + b[0].length; j++) {\n  //       if (i < a.length && j < a[0].length) {\n  //         temp[j] = a[i][j];\n  //       } else {\n  //         temp[j] = 0;\n  //       }\n  //     }\n  //     res.push(temp);\n  //   }\n  //   return res;\n  // }\n  //\n  // trimZero(grid) {\n  //   // return the zero trimmed grid\n  //   // trim zeroes\n  //   let row = false, col = false;\n  //   while (!row || !col) {\n  //     row = grid[grid.length-1].some((el) => el !== 0);\n  //     if (!row) { grid.pop(); }\n  //     col = grid.map((c) => c[c.length-1]).some((el) => el !== 0);\n  //     if (!col) { grid.forEach((r) => r.pop()); }\n  //   }\n  //   return grid;\n  // }\n  //\n  // processPositionAt(res, b, i, j) {\n  //   // returns the new borderLen / false\n  //   let newBorder = true;\n  //   // put b piece on the board\n  //   for (let x=0; x<b.length; x++) {\n  //     for (let y=0; y<b[0].length; y++) {\n  //       res[i + x][j + y] += b[x][y];\n  //       if (res[i + x][j + y] > 1) { newBorder = false; }\n  //     }\n  //   }\n  //   if (newBorder) { newBorder = Board.getBorderLength(res); }\n  //   // change that back to just have a piece\n  //   for (let x=0; x<b.length; x++) {\n  //     for (let y=0; y<b[0].length; y++) {\n  //       res[i + x][j + y] -= b[x][y];\n  //     }\n  //   }\n  //   return newBorder;\n  // }\n  //\n  // getBestPosition(res, a, b) {\n  //   let bestPos, borderLen;\n  //   for (let i=0; i<=res.length - b.length; i++) {\n  //     for (let j=0; j<=res[0].length - b[0].length; j++) {\n  //       let newBorder = this.processPositionAt(res, b, i, j);\n  //       if (!newBorder) { continue; }\n  //       if (!borderLen || newBorder < borderLen) {\n  //         borderLen = newBorder;\n  //         bestPos = [i, j];\n  //       }\n  //     }\n  //   }\n  //   return bestPos;\n  // }\n  //\n  // static getBorderLength(arr) {\n  //   // returns the piece's length of border\n  //   let len = 0;\n  //   for (let i=0; i<arr.length; i++) {\n  //     for (let j=0; j<arr[0].length; j++) {\n  //       if (arr[i][j] === 1) {\n  //         for (let n=0; n<4; n++) {\n  //           let [x, y] = neighbors[n];\n  //           if (arr[x+i] && arr[x+i][y+j] === 1) { continue; }\n  //           len++;\n  //         }\n  //       }\n  //     }\n  //   }\n  //   return len;\n  // }\n}\n\nexport default Board;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/board.js","import pieces from './piece_array.js';\n// prepopulate all the pieces in piece_array.js\n\n\nclass Piece {\n  constructor(i) {\n    let randomPiece = i ? pieces[i] : pieces[Math.floor(Math.random() * pieces.length)];\n    // let randomPiece = pieces[Math.floor(Math.random() * pieces.length)];\n    this.piecesArr = randomPiece.piecesArr;\n    this.possibleIndexes = randomPiece.possibleIndexes;\n    this.idx = 0;\n    this.placed = false;\n  }\n\n  currentPiece() {\n    return this.piecesArr[this.idx];\n  }\n\n  rotate() {\n    this.idx = (this.idx + 1) % 8;\n  }\n\n  flip() {\n    this.idx = (this.idx + 4) % 8;\n  }\n}\n\nexport default Piece;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/piece.js","const rotate = (arr) => {\n  let res = [];\n  for (let j=0; j<arr[0].length; j++) {\n    let temp = [];\n    for (let i=arr.length - 1; i>=0; i--) {\n      temp.push(arr[i][j]);\n    }\n    res.push(temp);\n  }\n  return res;\n};\n\nconst flip = (arr) => {\n  let res = [];\n  arr.forEach((row) => {\n    let temp = [];\n    for (let i=row.length - 1; i>=0; i--) {\n      temp.push(row[i]);\n    }\n    res.push(temp);\n  });\n  return res;\n};\n// in 12 pieces, 5 pieces shares same shape in rotation\n// 1 piece has same for all\n// [...[piece arr], [indexs of things that doesn't change]]\n// in 0 to 7 indexs\nconst pieces = [\n  [[1, 1, 1], [0, 1, 0], -1],\n  [[1, 1], [1, 1], [0]],\n  [[1, 1, 1], [0, 1]],\n  [[1, 1], [0, 1]],\n  [[1, 1, 1, 1], [0, 1]],\n  [[1, 1], [1, 0], -1],\n  [[1, 1, 1], [1, 1, 0], -1],\n  [[1, 1, 1], [1, 0, 0], -1],\n  [[1, 0, 0], [1, 1, 1], [0, 0, 1], [0, 1, 4, 5]],\n  [[1, 1, 1, 1], [0, 1, 0, 0], -1],\n  [[1, 1, 0], [0, 1, 1], [0, 1, 4, 5]],\n  [[1, 1, 1, 1], [1, 0, 0, 0], -1]\n];\n\nexport default pieces.map((p, idx) => {\n  const piece = {};\n  const last = p.pop();\n  piece.possibleIndexes = last === -1 ? [0, 1, 2, 3, 4, 5, 6, 7] : last;\n  piece.piecesArr = [p];\n  for (let i=0; i<3; i++) {\n    piece.piecesArr.push(rotate(piece.piecesArr[i]));\n  }\n  for (let i=0; i<4; i++) {\n    piece.piecesArr.push(flip(piece.piecesArr[i]));\n  }\n  return piece;\n});\n\n\n\n// WEBPACK FOOTER //\n// ./lib/piece_array.js","class Timer {\n  constructor($timer, seconds) {\n    this.$timer = $timer;\n    this.seconds = seconds;\n    this.renderTimer();\n    this.interval = undefined;\n    this.tick = this.tick.bind(this);\n  }\n\n  renderTimer() {\n    this.$timer.innerText = this.seconds;\n  }\n\n  reset(seconds) {\n    this.seconds = seconds;\n    this.renderTimer();\n  }\n\n  tick() {\n    this.seconds--;\n    this.renderTimer();\n    if (this.seconds === 0) {\n      window.clearInterval(this.interval);\n    }\n  }\n\n  stop() {\n    window.clearInterval(this.interval);\n  }\n\n  start() {\n    this.interval = window.setInterval(this.tick, 1000);\n  }\n}\n\nexport default Timer;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/timer.js"],"sourceRoot":""}