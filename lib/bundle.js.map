{"version":3,"sources":["webpack/bootstrap 369907d307ff4fdc4360","./lib/game_view.js","./lib/game.js","./lib/board.js","./lib/piece.js","./lib/piece_array.js"],"names":["document","addEventListener","g","play","Game","pieceNum","pieceSets","generateRandomPieces","board","undefined","dice","res","i","set","j","push","Math","floor","random","rollDice","window","neighbors","Board","pieceSet","leftPieces","generateBoard","placedPieces","Set","forEach","r","console","log","shuffledPieces","p","ob","piece","currentPiece","flipped","idx","combineTwo","pieceArr","location","isValid","result","map","Boolean","round","length","a","b","makeEmptyGridWith","bestPos","getBestPosition","trimZero","temp","grid","row","col","some","el","pop","c","newBorder","x","y","getBorderLength","borderLen","processPositionAt","arr","len","n","Piece","default","rotate","flip","pieces"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;ACtCA;;;;;;AAEAA,UAASC,gBAAT,CAA0B,kBAA1B,EAA8C,YAAM;AAClD,OAAIC,IAAI,oBAAR;AACAA,KAAEC,IAAF;AAED,EAJD,E;;;;;;;;;;;;;;ACFA;;;;AACA;;;;;;;;KAEMC,I;AACJ,mBAAc;AAAA;;AACZ,UAAKC,QAAL,GAAgB,CAAhB,CADY,CACO;AACnB,UAAKC,SAAL,GAAiB,KAAKC,oBAAL,EAAjB;AACA,UAAKC,KAAL,GAAaC,SAAb;AACA,UAAKC,IAAL,GAAYD,SAAZ;AACD;;;;4CAEsB;AACrB;AACA,WAAIE,MAAM,EAAV;AACA,YAAK,IAAIC,IAAE,CAAX,EAAcA,IAAE,CAAhB,EAAmBA,GAAnB,EAAwB;AACtB,aAAIC,MAAM,EAAV;AACA,cAAK,IAAIC,IAAE,CAAX,EAAcA,IAAE,KAAKT,QAArB,EAA+BS,GAA/B,EAAoC;AAClCD,eAAIE,IAAJ,CAAS,qBAAT;AACD;AACDJ,aAAII,IAAJ,CAASF,GAAT;AACD;AACD,cAAOF,GAAP;AACD;;;gCAEU;AACT,YAAKD,IAAL,GAAYM,KAAKC,KAAL,CAAWD,KAAKE,MAAL,KAAgB,CAA3B,CAAZ;AACA,YAAKV,KAAL,GAAa,oBAAU,KAAKF,SAAL,CAAe,KAAKI,IAApB,CAAV,CAAb;AACD;;;4BAEM;AACL,YAAKS,QAAL;AACAC,cAAOZ,KAAP,GAAe,KAAKA,KAApB;AACD;;;;;;mBAGYJ,I;;;;;;;;;;;;;;;;;;AClCf,KAAMiB,YAAY,CAAC,CAAC,CAAC,CAAF,EAAK,CAAL,CAAD,EAAU,CAAC,CAAD,EAAI,CAAJ,CAAV,EAAkB,CAAC,CAAD,EAAI,CAAC,CAAL,CAAlB,EAA2B,CAAC,CAAD,EAAI,CAAJ,CAA3B,CAAlB;;KAEMC,K;AACJ,kBAAYC,QAAZ,EAAsB;AAAA;;AACpB,UAAKC,UAAL,GAAkBD,QAAlB;AACA,UAAKf,KAAL,GAAa,KAAKiB,aAAL,EAAb;AACA,UAAKC,YAAL,GAAoB,IAAIC,GAAJ,EAApB;AACD;;;;+BAES;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAKnB,KAAL,CAAWoB,OAAX,CAAmB,UAACC,CAAD,EAAO;AACxBC,iBAAQC,GAAR,CAAYF,CAAZ;AACD,QAFD;AAGD;;;qCAEe;AAAA;;AACd;AACA,WAAIG,iBAAiB,KAAKA,cAAL,EAArB;AACA,WAAIxB,QAAQC,SAAZ;AACA;AACAuB,sBAAeJ,OAAf,CAAuB,UAACK,CAAD,EAAO;AAC5B,aAAIC,KAAK,MAAKV,UAAL,CAAgBS,EAAEE,KAAlB,CAAT;AACA,aAAIC,eAAeF,GAAGC,KAAH,CAASF,EAAEI,OAAF,GAAY,SAAZ,GAAwB,SAAjC,EAA4CJ,EAAEK,GAA9C,CAAnB;AACA;AACA;AACA;AACA;AACA;AACA,aAAI9B,UAAUC,SAAd,EAAyB;AACvBD,mBAAQ4B,YAAR;AACD,UAFD,MAEO;AACL5B,mBAAQ,MAAK+B,UAAL,CAAgB/B,KAAhB,EAAuB4B,YAAvB,CAAR;AACD;AACF,QAbD;AAcA,cAAO5B,KAAP;AACD;;;6BAEOgC,Q,EAAUC,Q,EAAU;AAC1B;AACD;;;gCAEUN,K,EAAOM,Q,EAAU;AAC1B,WAAI,KAAKC,OAAL,CAAaP,MAAMC,YAAN,EAAb,EAAmCK,QAAnC,CAAJ,EAAkD;AAChD;;AAED,QAHD,MAGO;AACL;AACD;AACF;;;iCAEWN,K,EAAO;AACjB;AACD;;;sCAEgB;AACf;AACA,WAAIQ,SAAS,KAAKnB,UAAL,CAAgBoB,GAAhB,CAAoB,UAACX,CAAD,EAAIrB,CAAJ,EAAU;AACzC,aAAIsB,KAAK,EAACC,OAAOvB,CAAR,EAAT;AACAsB,YAAGI,GAAH,GAAStB,KAAKC,KAAL,CAAWD,KAAKE,MAAL,KAAgB,CAA3B,CAAT;AACAgB,YAAGG,OAAH,GAAaQ,QAAQ7B,KAAK8B,KAAL,CAAW9B,KAAKE,MAAL,EAAX,CAAR,CAAb;AACA,gBAAOgB,EAAP;AACD,QALY,CAAb;AAMA,YAAK,IAAItB,IAAE,CAAX,EAAcA,IAAE+B,OAAOI,MAAvB,EAA+BnC,GAA/B,EAAoC;AAClC,aAAIE,IAAIE,KAAKC,KAAL,CAAWD,KAAKE,MAAL,KAAgByB,OAAOI,MAAlC,CAAR;AADkC,oBAET,CAACJ,OAAO7B,CAAP,CAAD,EAAY6B,OAAO/B,CAAP,CAAZ,CAFS;AAEjC+B,gBAAO/B,CAAP,CAFiC;AAEtB+B,gBAAO7B,CAAP,CAFsB;AAGnC;AACD,cAAO6B,MAAP;AACD;;;gCAEUK,C,EAAGC,C,EAAG;AACf;AACA,WAAItC,MAAM,KAAKuC,iBAAL,CAAuBF,CAAvB,EAA0BC,CAA1B,CAAV;AACA;AACA;AACA,WAAIE,UAAU,KAAKC,eAAL,CAAqBzC,GAArB,EAA0BqC,CAA1B,EAA6BC,CAA7B,CAAd;AACA;AACA,YAAK,IAAIrC,IAAE,CAAX,EAAcA,IAAEqC,EAAEF,MAAlB,EAA0BnC,GAA1B,EAA+B;AAC7B,cAAK,IAAIE,IAAE,CAAX,EAAcA,IAAEmC,EAAE,CAAF,EAAKF,MAArB,EAA6BjC,GAA7B,EAAkC;AAChCH,eAAIwC,QAAQ,CAAR,IAAWvC,CAAf,EAAkBuC,QAAQ,CAAR,IAAWrC,CAA7B,KAAmCmC,EAAErC,CAAF,EAAKE,CAAL,CAAnC;AACD;AACF;AACD,cAAO,KAAKuC,QAAL,CAAc1C,GAAd,CAAP;AACD;;;uCAEiBqC,C,EAAGC,C,EAAG;AACtB,WAAItC,MAAM,EAAV;AACA;AACA,YAAK,IAAIC,IAAE,CAAX,EAAcA,IAAEoC,EAAED,MAAF,GAAWE,EAAEF,MAA7B,EAAqCnC,GAArC,EAA0C;AACxC,aAAI0C,OAAO,EAAX;AACA,cAAK,IAAIxC,IAAE,CAAX,EAAcA,IAAEkC,EAAE,CAAF,EAAKD,MAAL,GAAcE,EAAE,CAAF,EAAKF,MAAnC,EAA2CjC,GAA3C,EAAgD;AAC9C,eAAIF,IAAIoC,EAAED,MAAN,IAAgBjC,IAAIkC,EAAE,CAAF,EAAKD,MAA7B,EAAqC;AACnCO,kBAAKxC,CAAL,IAAUkC,EAAEpC,CAAF,EAAKE,CAAL,CAAV;AACD,YAFD,MAEO;AACLwC,kBAAKxC,CAAL,IAAU,CAAV;AACD;AACF;AACDH,aAAII,IAAJ,CAASuC,IAAT;AACD;AACD,cAAO3C,GAAP;AACD;;;8BAEQ4C,I,EAAM;AACb;AACA;AACA,WAAIC,MAAM,KAAV;AAAA,WAAiBC,MAAM,KAAvB;AACA,cAAO,CAACD,GAAD,IAAQ,CAACC,GAAhB,EAAqB;AACnBD,eAAMD,KAAKA,KAAKR,MAAL,GAAY,CAAjB,EAAoBW,IAApB,CAAyB,UAACC,EAAD;AAAA,kBAAQA,OAAO,CAAf;AAAA,UAAzB,CAAN;AACA,aAAI,CAACH,GAAL,EAAU;AAAED,gBAAKK,GAAL;AAAa;AACzBH,eAAMF,KAAKX,GAAL,CAAS,UAACiB,CAAD;AAAA,kBAAOA,EAAEA,EAAEd,MAAF,GAAS,CAAX,CAAP;AAAA,UAAT,EAA+BW,IAA/B,CAAoC,UAACC,EAAD;AAAA,kBAAQA,OAAO,CAAf;AAAA,UAApC,CAAN;AACA,aAAI,CAACF,GAAL,EAAU;AAAEF,gBAAK3B,OAAL,CAAa,UAACC,CAAD;AAAA,oBAAOA,EAAE+B,GAAF,EAAP;AAAA,YAAb;AAA+B;AAC5C;AACD,cAAOL,IAAP;AACD;;;uCAEiB5C,G,EAAKsC,C,EAAGrC,C,EAAGE,C,EAAG;AAC9B;AACA,WAAIgD,YAAY,IAAhB;AACA;AACA,YAAK,IAAIC,IAAE,CAAX,EAAcA,IAAEd,EAAEF,MAAlB,EAA0BgB,GAA1B,EAA+B;AAC7B,cAAK,IAAIC,IAAE,CAAX,EAAcA,IAAEf,EAAE,CAAF,EAAKF,MAArB,EAA6BiB,GAA7B,EAAkC;AAChCrD,eAAIC,IAAImD,CAAR,EAAWjD,IAAIkD,CAAf,KAAqBf,EAAEc,CAAF,EAAKC,CAAL,CAArB;AACA,eAAIrD,IAAIC,IAAImD,CAAR,EAAWjD,IAAIkD,CAAf,IAAoB,CAAxB,EAA2B;AAAEF,yBAAY,KAAZ;AAAoB;AAClD;AACF;AACD,WAAIA,SAAJ,EAAe;AAAEA,qBAAYxC,MAAM2C,eAAN,CAAsBtD,GAAtB,CAAZ;AAAyC;AAC1D;AACA,YAAK,IAAIoD,KAAE,CAAX,EAAcA,KAAEd,EAAEF,MAAlB,EAA0BgB,IAA1B,EAA+B;AAC7B,cAAK,IAAIC,KAAE,CAAX,EAAcA,KAAEf,EAAE,CAAF,EAAKF,MAArB,EAA6BiB,IAA7B,EAAkC;AAChCrD,eAAIC,IAAImD,EAAR,EAAWjD,IAAIkD,EAAf,KAAqBf,EAAEc,EAAF,EAAKC,EAAL,CAArB;AACD;AACF;AACD,cAAOF,SAAP;AACD;;;qCAEenD,G,EAAKqC,C,EAAGC,C,EAAG;AACzB,WAAIE,gBAAJ;AAAA,WAAae,kBAAb;AACA,YAAK,IAAItD,IAAE,CAAX,EAAcA,KAAGD,IAAIoC,MAAJ,GAAaE,EAAEF,MAAhC,EAAwCnC,GAAxC,EAA6C;AAC3C,cAAK,IAAIE,IAAE,CAAX,EAAcA,KAAGH,IAAI,CAAJ,EAAOoC,MAAP,GAAgBE,EAAE,CAAF,EAAKF,MAAtC,EAA8CjC,GAA9C,EAAmD;AACjD,eAAIgD,YAAY,KAAKK,iBAAL,CAAuBxD,GAAvB,EAA4BsC,CAA5B,EAA+BrC,CAA/B,EAAkCE,CAAlC,CAAhB;AACA,eAAI,CAACgD,SAAL,EAAgB;AAAE;AAAW;AAC7B,eAAI,CAACI,SAAD,IAAcJ,YAAYI,SAA9B,EAAyC;AACvCA,yBAAYJ,SAAZ;AACAX,uBAAU,CAACvC,CAAD,EAAIE,CAAJ,CAAV;AACD;AACF;AACF;AACD,cAAOqC,OAAP;AACD;;;qCAEsBiB,G,EAAK;AAC1B;AACA,WAAIC,MAAM,CAAV;AACA,YAAK,IAAIzD,IAAE,CAAX,EAAcA,IAAEwD,IAAIrB,MAApB,EAA4BnC,GAA5B,EAAiC;AAC/B,cAAK,IAAIE,IAAE,CAAX,EAAcA,IAAEsD,IAAI,CAAJ,EAAOrB,MAAvB,EAA+BjC,GAA/B,EAAoC;AAClC,eAAIsD,IAAIxD,CAAJ,EAAOE,CAAP,MAAc,CAAlB,EAAqB;AACnB,kBAAK,IAAIwD,IAAE,CAAX,EAAcA,IAAE,CAAhB,EAAmBA,GAAnB,EAAwB;AAAA,iDACTjD,UAAUiD,CAAV,CADS;AAAA,mBACjBP,CADiB;AAAA,mBACdC,CADc;;AAEtB,mBAAII,IAAIL,IAAEnD,CAAN,KAAYwD,IAAIL,IAAEnD,CAAN,EAASoD,IAAElD,CAAX,MAAkB,CAAlC,EAAqC;AAAE;AAAW;AAClDuD;AACD;AACF;AACF;AACF;AACD,cAAOA,GAAP;AACD;;;;;;mBAGY/C,K;;;;;;;;;;;;;;AC/Kf;;;;;;;;AACA;;KAEMiD,K;AACJ,oBAAc;AAAA;;AACZ,UAAKpC,KAAL,GAAa,sBAAOnB,KAAKC,KAAL,CAAWD,KAAKE,MAAL,KAAgB,sBAAO6B,MAAlC,CAAP,CAAb;AACA,UAAKT,GAAL,GAAW,CAAX;AACA,UAAKD,OAAL,GAAe,KAAf;AACD;;;;oCAEc;AACb,WAAIG,WAAW,KAAKH,OAAL,GAAe,KAAKF,KAAL,CAAWE,OAA1B,GAAoC,KAAKF,KAAL,CAAWqC,OAA9D;AACA,cAAOhC,SAAS,KAAKF,GAAd,CAAP;AACD;;;8BAEQ;AACP,YAAKA,GAAL,GAAW,CAAC,KAAKA,GAAL,GAAW,CAAZ,IAAiB,CAA5B;AACD;;;4BAEM;AACL;AACA,YAAKD,OAAL,GAAe,CAAC,KAAKA,OAArB;AACD;;;;;;mBAGYkC,K;;;;;;;;;;;ACzBf,KAAME,SAAS,SAATA,MAAS,CAACL,GAAD,EAAS;AACtB,OAAIzD,MAAM,EAAV;AACA,QAAK,IAAIG,IAAE,CAAX,EAAcA,IAAEsD,IAAI,CAAJ,EAAOrB,MAAvB,EAA+BjC,GAA/B,EAAoC;AAClC,SAAIwC,OAAO,EAAX;AACA,UAAK,IAAI1C,IAAEwD,IAAIrB,MAAJ,GAAa,CAAxB,EAA2BnC,KAAG,CAA9B,EAAiCA,GAAjC,EAAsC;AACpC0C,YAAKvC,IAAL,CAAUqD,IAAIxD,CAAJ,EAAOE,CAAP,CAAV;AACD;AACDH,SAAII,IAAJ,CAASuC,IAAT;AACD;AACD,UAAO3C,GAAP;AACD,EAVD;;AAYA,KAAM+D,OAAO,SAAPA,IAAO,CAACN,GAAD,EAAS;AACpB,OAAIzD,MAAM,EAAV;AACAyD,OAAIxC,OAAJ,CAAY,UAAC4B,GAAD,EAAS;AACnB,SAAIF,OAAO,EAAX;AACA,UAAK,IAAI1C,IAAE4C,IAAIT,MAAJ,GAAa,CAAxB,EAA2BnC,KAAG,CAA9B,EAAiCA,GAAjC,EAAsC;AACpC0C,YAAKvC,IAAL,CAAUyC,IAAI5C,CAAJ,CAAV;AACD;AACDD,SAAII,IAAJ,CAASuC,IAAT;AACD,IAND;AAOA,UAAO3C,GAAP;AACD,EAVD;;AAYA,KAAMgE,SAAS,CACb,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAD,EAAY,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAZ,CADa,EAEb,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,EAAS,CAAC,CAAD,EAAI,CAAJ,CAAT,CAFa,EAGb,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAD,CAHa,EAIb,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,CAJa,EAKb,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAD,CALa,EAMb,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,EAAS,CAAC,CAAD,EAAI,CAAJ,CAAT,CANa,EAOb,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAD,EAAY,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAZ,CAPa,EAQb,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAD,EAAY,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAZ,CARa,EASb,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAD,EAAY,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAZ,EAAuB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAvB,CATa,EAUb,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAD,EAAe,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAf,CAVa,EAWb,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAD,EAAY,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAZ,CAXa,EAYb,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAD,EAAe,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAf,CAZa,CAAf;;mBAeeA,OAAO/B,GAAP,CAAW,UAACX,CAAD,EAAIK,GAAJ,EAAY;AACpC,OAAIH,QAAQ,EAAZ;AACAA,SAAMqC,OAAN,GAAgB,CAACvC,CAAD,CAAhB;AACAE,SAAME,OAAN,GAAgB,CAACqC,KAAKzC,CAAL,CAAD,CAAhB;AACA,QAAK,IAAIrB,IAAE,CAAX,EAAcA,IAAE,CAAhB,EAAmBA,GAAnB,EAAwB;AACtBuB,WAAMqC,OAAN,CAAczD,IAAd,CAAmB0D,OAAOtC,MAAMqC,OAAN,CAAc5D,CAAd,CAAP,CAAnB;AACAuB,WAAME,OAAN,CAActB,IAAd,CAAmB0D,OAAOtC,MAAME,OAAN,CAAczB,CAAd,CAAP,CAAnB;AACD;AACD,UAAOuB,KAAP;AACD,EATc,C","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/lib/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 369907d307ff4fdc4360","import Game from './game.js';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  let g = new Game();\n  g.play();\n  \n});\n\n\n\n// WEBPACK FOOTER //\n// ./lib/game_view.js","import Board from './board.js';\nimport Piece from './piece.js';\n\nclass Game {\n  constructor() {\n    this.pieceNum = 4; // 4 = easy, 5 = medium, 6 = hard\n    this.pieceSets = this.generateRandomPieces();\n    this.board = undefined;\n    this.dice = undefined;\n  }\n\n  generateRandomPieces() {\n    // returns 6 sets of piece arrays\n    let res = [];\n    for (let i=0; i<6; i++) {\n      let set = [];\n      for (let j=0; j<this.pieceNum; j++) {\n        set.push(new Piece());\n      }\n      res.push(set);\n    }\n    return res;\n  }\n\n  rollDice() {\n    this.dice = Math.floor(Math.random() * 6);\n    this.board = new Board(this.pieceSets[this.dice]);\n  }\n\n  play() {\n    this.rollDice();\n    window.board = this.board;\n  }\n}\n\nexport default Game;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/game.js","\nconst neighbors = [[-1, 0], [1, 0], [0, -1], [0, 1]];\n\nclass Board {\n  constructor(pieceSet) {\n    this.leftPieces = pieceSet;\n    this.board = this.generateBoard();\n    this.placedPieces = new Set();\n  }\n\n  display() {\n    // this.leftPieces.forEach((p) => {\n    //   console.log('-----------------');\n    //   let init = p.piece.default[0];\n    //   init.forEach((i) => {\n    //     console.log(i);\n    //   });\n    // });\n    this.board.forEach((r) => {\n      console.log(r);\n    });\n  }\n\n  generateBoard() {\n    // returns the most dense board possible\n    let shuffledPieces = this.shuffledPieces();\n    let board = undefined;\n    // make the board as normal 2D array\n    shuffledPieces.forEach((p) => {\n      let ob = this.leftPieces[p.piece];\n      let currentPiece = ob.piece[p.flipped ? \"flipped\" : \"default\"][p.idx];\n      // for testing\n      // console.log('board');\n      // console.log(board);\n      // console.log('currentPiece');\n      // console.log(currentPiece);\n      if (board === undefined) {\n        board = currentPiece;\n      } else {\n        board = this.combineTwo(board, currentPiece);\n      }\n    });\n    return board;\n  }\n\n  isValid(pieceArr, location) {\n    // returns true if the piece can be placed on the location\n  }\n\n  placePiece(piece, location) {\n    if (this.isValid(piece.currentPiece(), location)) {\n      // place piece\n\n    } else {\n      // put the piece to the last position\n    }\n  }\n\n  removePiece(piece) {\n    // remove the piece from the board\n  }\n\n  shuffledPieces() {\n    // shuffles the pieces\n    let result = this.leftPieces.map((p, i) => {\n      let ob = {piece: i};\n      ob.idx = Math.floor(Math.random() * 4);\n      ob.flipped = Boolean(Math.round(Math.random()));\n      return ob;\n    });\n    for (let i=0; i<result.length; i++) {\n      let j = Math.floor(Math.random() * result.length);\n      [result[i], result[j]] = [result[j], result[i]];\n    }\n    return result;\n  }\n\n  combineTwo(a, b) {\n    // combine two pieces for the best result\n    let res = this.makeEmptyGridWith(a, b);\n    // move the b block around and save that position if\n    // it makes shorter border length\n    let bestPos = this.getBestPosition(res, a, b);\n    // put b block in the best position\n    for (let i=0; i<b.length; i++) {\n      for (let j=0; j<b[0].length; j++) {\n        res[bestPos[0]+i][bestPos[1]+j] += b[i][j];\n      }\n    }\n    return this.trimZero(res);\n  }\n\n  makeEmptyGridWith(a, b) {\n    let res = [];\n    // make new empty grid\n    for (let i=0; i<a.length + b.length; i++) {\n      let temp = [];\n      for (let j=0; j<a[0].length + b[0].length; j++) {\n        if (i < a.length && j < a[0].length) {\n          temp[j] = a[i][j];\n        } else {\n          temp[j] = 0;\n        }\n      }\n      res.push(temp);\n    }\n    return res;\n  }\n\n  trimZero(grid) {\n    // return the zero trimmed grid\n    // trim zeroes\n    let row = false, col = false;\n    while (!row || !col) {\n      row = grid[grid.length-1].some((el) => el !== 0);\n      if (!row) { grid.pop(); }\n      col = grid.map((c) => c[c.length-1]).some((el) => el !== 0);\n      if (!col) { grid.forEach((r) => r.pop()); }\n    }\n    return grid;\n  }\n\n  processPositionAt(res, b, i, j) {\n    // returns the new borderLen / false\n    let newBorder = true;\n    // put b piece on the board\n    for (let x=0; x<b.length; x++) {\n      for (let y=0; y<b[0].length; y++) {\n        res[i + x][j + y] += b[x][y];\n        if (res[i + x][j + y] > 1) { newBorder = false; }\n      }\n    }\n    if (newBorder) { newBorder = Board.getBorderLength(res); }\n    // change that back to just have a piece\n    for (let x=0; x<b.length; x++) {\n      for (let y=0; y<b[0].length; y++) {\n        res[i + x][j + y] -= b[x][y];\n      }\n    }\n    return newBorder;\n  }\n\n  getBestPosition(res, a, b) {\n    let bestPos, borderLen;\n    for (let i=0; i<=res.length - b.length; i++) {\n      for (let j=0; j<=res[0].length - b[0].length; j++) {\n        let newBorder = this.processPositionAt(res, b, i, j);\n        if (!newBorder) { continue; }\n        if (!borderLen || newBorder < borderLen) {\n          borderLen = newBorder;\n          bestPos = [i, j];\n        }\n      }\n    }\n    return bestPos;\n  }\n\n  static getBorderLength(arr) {\n    // returns the piece's length of border\n    let len = 0;\n    for (let i=0; i<arr.length; i++) {\n      for (let j=0; j<arr[0].length; j++) {\n        if (arr[i][j] === 1) {\n          for (let n=0; n<4; n++) {\n            let [x, y] = neighbors[n];\n            if (arr[x+i] && arr[x+i][y+j] === 1) { continue; }\n            len++;\n          }\n        }\n      }\n    }\n    return len;\n  }\n}\n\nexport default Board;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/board.js","import pieces from './piece_array.js';\n// prepopulate all the pieces in piece_array.js\n\nclass Piece {\n  constructor() {\n    this.piece = pieces[Math.floor(Math.random() * pieces.length)];\n    this.idx = 0;\n    this.flipped = false;\n  }\n\n  currentPiece() {\n    let pieceArr = this.flipped ? this.piece.flipped : this.piece.default;\n    return pieceArr[this.idx];\n  }\n\n  rotate() {\n    this.idx = (this.idx + 1) % 4;\n  }\n\n  flip() {\n    // flip the piece\n    this.flipped = !this.flipped;\n  }\n}\n\nexport default Piece;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/piece.js","const rotate = (arr) => {\n  let res = [];\n  for (let j=0; j<arr[0].length; j++) {\n    let temp = [];\n    for (let i=arr.length - 1; i>=0; i--) {\n      temp.push(arr[i][j]);\n    }\n    res.push(temp);\n  }\n  return res;\n};\n\nconst flip = (arr) => {\n  let res = [];\n  arr.forEach((row) => {\n    let temp = [];\n    for (let i=row.length - 1; i>=0; i--) {\n      temp.push(row[i]);\n    }\n    res.push(temp);\n  });\n  return res;\n};\n\nconst pieces = [\n  [[1, 1, 1], [0, 1, 0]],\n  [[1, 1], [1, 1]],\n  [[1, 1, 1]],\n  [[1, 1]],\n  [[1, 1, 1, 1]],\n  [[1, 1], [1, 0]],\n  [[1, 1, 1], [1, 1, 0]],\n  [[1, 1, 1], [1, 0, 0]],\n  [[1, 0, 0], [1, 1, 1], [0, 0, 1]],\n  [[1, 1, 1, 1], [0, 1, 0, 0]],\n  [[1, 1, 0], [0, 1, 1]],\n  [[1, 1, 1, 1], [1, 0, 0, 0]]\n];\n\nexport default pieces.map((p, idx) => {\n  let piece = {};\n  piece.default = [p];\n  piece.flipped = [flip(p)];\n  for (let i=0; i<3; i++) {\n    piece.default.push(rotate(piece.default[i]));\n    piece.flipped.push(rotate(piece.flipped[i]));\n  }\n  return piece;\n});\n\n\n\n// WEBPACK FOOTER //\n// ./lib/piece_array.js"],"sourceRoot":""}