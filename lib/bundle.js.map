{"version":3,"sources":["webpack/bootstrap 75394fee8629e466a227","./lib/game_view.js","./lib/game.js","./lib/board.js","./lib/piece.js","./lib/piece_array.js","./lib/timer.js","./lib/utils.js"],"names":["document","addEventListener","board","getElementById","pieces","play","rotate","flip","levels","moveSound","instruction","boardNode","game","timer","Array","from","children","forEach","li","idx","e","innerHTML","style","display","preventDefault","btn","pickedPiece","movePickedPiece","id","colors","Game","$boardNode","$pieces","pieceNum","pieceSets","undefined","dice","pieceMap","pickedCell","isPlaying","generateRandomPieces","Math","floor","random","generatePieceMap","rollDice","renderBoard","i","length","j","el","removePiece","bind","setAttribute","v","k","appendChild","res","set","colorIdx","p","color","push","action","pieceObject","get","renderPiece","node","piece","currentPiece","row","ul","createElement","target","backgroundColor","pieceSet","Map","pieceOb","pieceNode","classList","add","pieceClickHandler","remove","neighbors","Board","piecesObjects","values","generateBoard","cellMap","every","placed","loc","console","log","t","join","window","placeHelper","cursor","pos","put","callback","contains","cell","delete","result","map","shuffledPieces","firstP","pop","piecesArr","movePieceAt","getBestPieceAndPosition","bestPos","bestPiece","len","n","sharedBorder","possibleIndexes","current","newBorder","Piece","randomPiece","arr","temp","last","Timer","$timer","seconds","renderTimer","interval","tick","innerText","clearInterval","setInterval","setLevelHandler","getElementsByClassName","getGridNode","gridNode","findLoc","disableInteraction","isWin","querySelectorAll","dropHandler","placeSound","parentNode","currentPieceNode","currentPieceObject","bLoc","pLoc","topLeft","isValid","placePiece","isWon","stop"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/lib/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 75394fee8629e466a227","import Game from './game.js';\nimport Timer from './timer.js';\nimport { setLevelHandler, getGridNode, findLoc,\n  disableInteraction, dropHandler } from './utils.js';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  let board = document.getElementById('board');\n  let pieces = document.getElementById('pieces');\n  let play = document.getElementById('play');\n  let rotate = document.getElementById('rotate');\n  let flip = document.getElementById('flip');\n  let levels = document.getElementById('levels');\n  let moveSound = document.getElementById('move-sound');\n  let instruction = document.getElementById('instruction');\n  let boardNode = getGridNode(board);\n\n  let game = new Game(boardNode, pieces);\n  let timer = new Timer(document.getElementById('timer'), 60);\n\n  Array.from(levels.children).forEach((li, idx) => {\n    setLevelHandler(game, li, idx);\n  });\n\n  document.addEventListener('drop',\n    (e) => dropHandler(game, boardNode, levels, timer, e));\n\n  play.addEventListener('click', () => {\n    pieces.innerHTML = \"\";\n    levels.style.display = \"none\";\n    instruction.style.display = \"none\";\n    // timer.stop();\n    // timer.reset(seconds);\n    // timer.start();\n    // window.setTimeout(() => {\n    //   // disable interaction if the game is still in playing when the timer goes off\n    //   if (timer.seconds === 0) {\n    //     disableInteraction(game, pieces, levels);\n    //   }\n    // }, seconds * 1000);\n    game.play();\n  });\n\n  document.addEventListener('dragover', (e) => {\n    e.preventDefault();\n  }, false);\n\n  [rotate, flip].forEach((btn) => {\n    btn.addEventListener('click', (e) => {\n      e.preventDefault();\n      if (game && game.pickedPiece) {\n        moveSound.play();\n        game.movePickedPiece(btn.id);\n      }\n    });\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./lib/game_view.js","import Board from './board.js';\nimport Piece from './piece.js';\n\nconst colors = ['rgb(162, 72, 151)', 'rgb(238, 89, 139)', 'rgb(126, 205, 199)', 'rgb(34, 193, 228)', 'rgb(45, 49, 108)', 'rgb(246, 180, 205)', 'rgb(245, 143, 51)', 'rgb(226, 35, 63)', 'rgb(250, 235, 62)', 'rgb(189, 214, 93)', 'rgb(241, 122, 128)'];\n\nclass Game {\n  constructor($boardNode, $pieces) {\n    // when the game ends, clear the boardNode and pieces\n    this.$boardNode = $boardNode;\n    this.$pieces = $pieces;\n    this.pieceNum = 4;\n    this.pieceSets = undefined;\n    this.board = undefined;\n    this.dice = undefined;\n    this.pieceMap = undefined;\n    this.pickedPiece = undefined;\n    this.pickedCell = undefined;\n    this.isPlaying = false;\n  }\n\n  rollDice() {\n    this.pieceSets = this.generateRandomPieces();\n    this.dice = Math.floor(Math.random() * 6);\n    this.generatePieceMap(this.pieceSets[this.dice]);\n    this.board = new Board(this.pieceMap, this.$boardNode);\n  }\n\n  play() {\n    this.pieceSets = undefined;\n    this.board = undefined;\n    this.dice = undefined;\n    this.pieceMap = undefined;\n    this.pickedPiece = undefined;\n    this.pickedCell = undefined;\n    this.isPlaying = true;\n    this.rollDice();\n    this.renderBoard();\n  }\n\n  renderBoard() {\n    for (let i=0; i<this.board.board.length; i++) {\n      for (let j=0; j<this.board.board[0].length; j++) {\n        let el = this.$boardNode[i][j];\n        if (this.board.board[i][j] === 1) {\n          el.addEventListener('click', this.board.removePiece.bind(this));\n        }\n        el.setAttribute('class', this.board.board[i][j] === 1 ? 'filled' : \"\");\n      }\n    }\n    this.pieceMap.forEach((v, k) => {\n      this.$pieces.appendChild(k);\n    });\n  }\n\n  generateRandomPieces() {\n    // returns 6 sets of piece arrays\n    let res = [];\n    for (let i=0; i<6; i++) {\n      let set = [];\n      let colorIdx = Math.floor(Math.random() * colors.length);\n      for (let j=0; j<this.pieceNum; j++) {\n        let p = new Piece();\n        p.color = colors[(colorIdx + j) % colors.length];\n        set.push(p);\n      }\n      res.push(set);\n    }\n    return res;\n  }\n\n  movePickedPiece(action) {\n    let pieceObject = this.pieceMap.get(this.pickedPiece);\n    if (action === \"flip\") {\n      pieceObject.flip();\n    } else {\n      pieceObject.rotate();\n    }\n    this.renderPiece(this.pickedPiece, pieceObject);\n  }\n\n  renderPiece(node, piece) {\n    node.innerHTML = \"\";\n    piece.currentPiece().forEach((row) => {\n      let ul = document.createElement('ul');\n      row.forEach((el) => {\n        let li = document.createElement('li');\n        li.addEventListener('mousedown', (e) => {\n          this.pickedCell = e.target;\n        });\n        li.addEventListener('mouseup', (e) => {\n          this.pickedCell = undefined;\n        });\n        if (el === 1) { li.style.backgroundColor = piece.color; }\n        ul.appendChild(li);\n      });\n      node.appendChild(ul);\n    });\n  }\n\n  generatePieceMap(pieceSet) {\n    this.pieceMap = new Map();\n    pieceSet.forEach((pieceOb) => {\n      let pieceNode = document.createElement('div');\n      pieceNode.classList.add('piece');\n      pieceNode.setAttribute('draggable', true);\n      this.renderPiece(pieceNode, pieceOb);\n      pieceNode.addEventListener('click', this.pieceClickHandler.bind(this, pieceNode));\n      this.pieceMap.set(pieceNode, pieceOb);\n    });\n  }\n\n  pieceClickHandler(pieceNode, e) {\n    e.preventDefault();\n    if (this.isPlaying === false) { return; }\n    if (this.pickedPiece === pieceNode) {\n      pieceNode.classList.remove('picked');\n      this.pickedPiece = undefined;\n    } else {\n      if (this.pickedPiece) {\n        this.pickedPiece.classList.remove('picked');\n      }\n      pieceNode.classList.add('picked');\n      this.pickedPiece = pieceNode;\n    }\n  }\n}\n\nexport default Game;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/game.js","const neighbors = [[-1, 0], [1, 0], [0, -1], [0, 1]];\n\nclass Board {\n  constructor(pieceMap, $boardNode) {\n    this.piecesObjects = Array.from(pieceMap.values());\n    this.pieceMap = pieceMap;\n    this.$boardNode = $boardNode;\n    this.board = this.generateBoard();\n    this.cellMap = new Map();\n  }\n\n  isWon() {\n    return this.piecesObjects.every((p) => p.placed);\n  }\n\n  isValid(pieceOb, loc) {\n    // returns true if the piece can be placed on the location\n    // for testing, logging stuff\n    if (pieceOb.placed || loc[0] < 0 || loc[1] < 0) {\n      console.log(\"piece already placed or location is smaller than 0\");\n      return false;\n    }\n    let piece = pieceOb.currentPiece();\n    for (let i=0; i<piece.length; i++) {\n      for (let j=0; j<piece[0].length; j++) {\n        if (piece[i][j] === 1 && this.board[i+loc[0]][j+loc[1]] !== 1) {\n          // These are for testing!\n          console.log(`piece location: ${i}, ${j}`);\n          console.log(`board location: ${i+loc[0]}, ${j+loc[1]}`);\n          console.log(\"piece:\");\n          piece.forEach((row, t) => {\n            console.log(`${t} ${row.join(\" \")}`);\n          });\n          console.log(\"board:\");\n          this.board.forEach((row, t) => {\n            console.log(`${t} ${row.join(\" \")}`);\n          });\n          window.board = this.board;\n          return false;\n        }\n      }\n    }\n    return true;\n  }\n\n  placePiece(pieceNode, loc) {\n    let pieceOb = this.pieceMap.get(pieceNode);\n    let piece = pieceOb.currentPiece();\n    for (let i=0; i<piece.length; i++) {\n      for (let j=0; j<piece[0].length; j++) {\n        if (piece[i][j] === 1) {\n          this.placeHelper([i+loc[0], j+loc[1]], pieceNode, pieceOb);\n        }\n      }\n    }\n    pieceNode.classList.add(\"placed-piece\");\n    pieceOb.placed = true;\n  }\n\n  placeHelper(loc, pieceNode, pieceOb) {\n    this.board[loc[0]][loc[1]] = 2;\n    this.$boardNode[loc[0]][loc[1]].style.backgroundColor = pieceOb.color;\n    this.cellMap.set(this.$boardNode[loc[0]][loc[1]], pieceNode);\n    this.$boardNode[loc[0]][loc[1]].classList.add(\"placed-cell\");\n    this.$boardNode[loc[0]][loc[1]].style.cursor = \"pointer\";\n  }\n\n  movePieceAt(pos, board, piece, put, callback) {\n    // put is boolean. if it's true, place piece\n    // if it's false, remove piece from the pos\n    for (let i=0; i<piece.length; i++) {\n      for (let j=0; j<piece[0].length; j++) {\n        if (piece[i][j] === 1) {\n          if (put) {\n            board[i+pos[0]][j+pos[1]]++;\n          } else {\n            board[i+pos[0]][j+pos[1]]--;\n          }\n        }\n      }\n    }\n  }\n\n  removePiece(e) {\n    if (this.isPlaying && e.target.classList.contains(\"placed-cell\")) {\n      let pieceNode = this.board.cellMap.get(e.target);\n      pieceNode.classList.remove(\"placed-piece\");\n      this.pieceMap.get(pieceNode).placed = false;\n      this.board.$boardNode.forEach((row, i) => {\n        row.forEach((cell, j) => {\n          if (this.board.cellMap.get(cell) === pieceNode) {\n            cell.setAttribute(\"style\", \"\");\n            cell.classList.remove(\"placed-cell\");\n            this.board.board[i][j] = 1;\n            this.board.cellMap.delete(cell);\n          }\n        });\n      });\n    }\n  }\n\n  shuffledPieces() {\n    // shuffles the pieces\n    const result = this.piecesObjects.map((p) => p);\n    for (let i=0; i<result.length; i++) {\n      let j = Math.floor(Math.random() * result.length);\n      [result[i], result[j]] = [result[j], result[i]];\n    }\n    return result;\n  }\n\n  generateBoard() {\n    // TODO more randomize!!\n    let shuffledPieces = this.shuffledPieces();\n    let board = this.$boardNode.map((row) => row.map((cell) => 0));\n    // for testing\n    // let firstP = new Piece(8).piecesArr[4];\n    // console.log(firstP);\n    // pick the first piece randomly\n    let firstP = shuffledPieces.pop().piecesArr[Math.floor(Math.random() * 8)];\n    // start at the middle\n    let i = Math.floor((board.length - firstP.length) / 2);\n    let j = Math.floor((board[0].length - firstP[0].length) / 2);\n    this.movePieceAt([i, j], board, firstP, true);\n    // board.forEach((row, t) => {\n    //   console.log(`${t} ${row.join(\" \")}`);\n    // });\n    // let secondP = new Piece(7);\n    // let [bestPos, bestPiece] = this.getBestPieceAndPosition(board, secondP);\n    // this.movePieceAt(bestPos, board, bestPiece, true);\n\n    shuffledPieces.forEach((p) => {\n      let [bestPos, bestPiece] = this.getBestPieceAndPosition(board, p);\n      this.movePieceAt(bestPos, board, bestPiece, true);\n    });\n    return board;\n  }\n\n  sharedBorder(pos, board, piece) {\n    let len = 0;\n    for (let i=0; i<piece.length; i++) {\n      for (let j=0; j<piece[0].length; j++) {\n        if (piece[i][j] === 1) {\n          if (board[i+pos[0]][j+pos[1]] === 1) { return -1; }\n          neighbors.forEach((n) => {\n            if (board[n[0]+i+pos[0]] !== undefined && board[n[0]+i+pos[0]][n[1]+j+pos[1]] === 1) {\n              len++;\n            }\n          });\n        }\n      }\n    }\n    return len;\n  }\n\n  getBestPieceAndPosition(board, piece) {\n    // get the best possible position by running through\n    // all possible combination\n    let sharedBorder = -1;\n    let bestPos = [];\n    let bestPiece = [];\n    piece.possibleIndexes.forEach((idx) => {\n      let current = piece.piecesArr[idx];\n      for (let i=0; i<board.length - current.length; i++) {\n        for (let j=0; j<board[0].length - current[0].length; j++) {\n          let newBorder = this.sharedBorder([i, j], board, current);\n          if (newBorder > sharedBorder) {\n            sharedBorder = newBorder;\n            bestPos = [i, j];\n            bestPiece = current;\n          }\n        }\n      }\n    });\n    return [bestPos, bestPiece];\n  }\n}\n\nexport default Board;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/board.js","import pieces from './piece_array.js';\n// prepopulate all the pieces in piece_array.js\n\n\nclass Piece {\n  constructor(i) {\n    let randomPiece = i ? pieces[i] : pieces[Math.floor(Math.random() * pieces.length)];\n    // let randomPiece = pieces[Math.floor(Math.random() * pieces.length)];\n    this.piecesArr = randomPiece.piecesArr;\n    this.possibleIndexes = randomPiece.possibleIndexes;\n    this.idx = 0;\n    this.placed = false;\n  }\n\n  currentPiece() {\n    return this.piecesArr[this.idx];\n  }\n\n  rotate() {\n    // gotta think about the flip stuff\n    // rotation should only change it to next 3 things\n    this.idx = (this.idx + 1) % 8;\n  }\n\n  flip() {\n    this.idx = (this.idx + 4) % 8;\n  }\n}\n\nexport default Piece;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/piece.js","const rotate = (arr) => {\n  let res = [];\n  for (let j=0; j<arr[0].length; j++) {\n    let temp = [];\n    for (let i=arr.length - 1; i>=0; i--) {\n      temp.push(arr[i][j]);\n    }\n    res.push(temp);\n  }\n  return res;\n};\n\nconst flip = (arr) => {\n  let res = [];\n  arr.forEach((row) => {\n    let temp = [];\n    for (let i=row.length - 1; i>=0; i--) {\n      temp.push(row[i]);\n    }\n    res.push(temp);\n  });\n  return res;\n};\n// in 12 pieces, 5 pieces shares same shape in rotation\n// 1 piece has same for all\n// [...[piece arr], [indexs of things that doesn't change]]\n// in 0 to 7 indexs\nconst pieces = [\n  [[1, 1, 1], [0, 1, 0], -1],\n  [[1, 1], [1, 1], [0]],\n  [[1, 1, 1], [0, 1]],\n  [[1, 1], [0, 1]],\n  [[1, 1, 1, 1], [0, 1]],\n  [[1, 1], [1, 0], -1],\n  [[1, 1, 1], [1, 1, 0], -1],\n  [[1, 1, 1], [1, 0, 0], -1],\n  [[1, 0, 0], [1, 1, 1], [0, 0, 1], [0, 1, 4, 5]],\n  [[1, 1, 1, 1], [0, 1, 0, 0], -1],\n  [[1, 1, 0], [0, 1, 1], [0, 1, 4, 5]],\n  [[1, 1, 1, 1], [1, 0, 0, 0], -1]\n];\n\nexport default pieces.map((p, idx) => {\n  const piece = {};\n  const last = p.pop();\n  piece.possibleIndexes = last === -1 ? [0, 1, 2, 3, 4, 5, 6, 7] : last;\n  piece.piecesArr = [p];\n  for (let i=0; i<3; i++) {\n    piece.piecesArr.push(rotate(piece.piecesArr[i]));\n  }\n  for (let i=0; i<4; i++) {\n    piece.piecesArr.push(flip(piece.piecesArr[i]));\n  }\n  return piece;\n});\n\n\n\n// WEBPACK FOOTER //\n// ./lib/piece_array.js","class Timer {\n  constructor($timer, seconds) {\n    this.$timer = $timer;\n    this.seconds = seconds;\n    this.renderTimer();\n    this.interval = undefined;\n    this.tick = this.tick.bind(this);\n  }\n\n  renderTimer() {\n    this.$timer.innerText = this.seconds;\n  }\n\n  reset(seconds) {\n    this.seconds = seconds;\n    this.renderTimer();\n  }\n\n  tick() {\n    this.seconds--;\n    this.renderTimer();\n    if (this.seconds === 0) {\n      window.clearInterval(this.interval);\n    }\n  }\n\n  stop() {\n    window.clearInterval(this.interval);\n  }\n\n  start() {\n    this.interval = window.setInterval(this.tick, 1000);\n  }\n}\n\nexport default Timer;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/timer.js","const setLevelHandler = (game, li, idx) => {\n  li.addEventListener('click', () => {\n    if (!game.isPlaying) {\n      document.getElementsByClassName('selected-level')[0].classList.remove('selected-level');\n      li.classList.add('selected-level');\n      game.pieceNum = idx + 4;\n    }\n  });\n};\n\nconst getGridNode = (gridNode) => {\n  return Array.from(gridNode.children).map((row) => Array.from(row.children));\n};\n\n\nconst findLoc = (boardNode, cell) => {\n  for (let i=0; i<boardNode.length; i++) {\n    for (let j=0; j<boardNode[0].length; j++) {\n      if (boardNode[i][j] === cell) {\n        return [i, j];\n      }\n    }\n  }\n};\n\n\nconst disableInteraction = (isWin) => {\n  document.querySelectorAll('#board li.filled').forEach((cell) => {\n    cell.style.cursor = \"default\";\n    if (!isWin) {\n      cell.style.backgroundColor = \"#EEE\";\n    }\n  });\n\n  document.querySelectorAll('#pieces li').forEach((cell) => {\n    if (!isWin) {\n      cell.style.backgroundColor = \"#EEE\";\n    }\n  });\n\n  document.querySelectorAll('#pieces > *').forEach((piece) => {\n    piece.style.cursor = \"default\";\n    piece.setAttribute('draggable', false);\n  });\n};\n\nconst dropHandler = (game, boardNode, levels, timer, e) => {\n  let placeSound = document.getElementById('place-sound');\n  e.preventDefault();\n  if (e.target.parentNode.classList &&\n    e.target.parentNode.classList.contains(\"dropzone\") &&\n      game && game.isPlaying && game.pickedCell) {\n    let currentPieceNode = game.pickedCell.parentNode.parentNode;\n    let currentPieceObject = game.pieceMap.get(currentPieceNode);\n    let bLoc = findLoc(boardNode, e.target);\n    let pLoc = findLoc(getGridNode(currentPieceNode), game.pickedCell);\n    let topLeft = [bLoc[0] - pLoc[0], bLoc[1] - pLoc[1]];\n    if (game.board.isValid(currentPieceObject, topLeft)) {\n      game.board.placePiece(currentPieceNode, topLeft);\n      placeSound.play();\n      if (game.board.isWon()) {\n        game.isPlaying = false;\n        levels.style.display = \"flex\";\n        disableInteraction(true);\n        timer.stop();\n      }\n    }\n  }\n};\n\nexport { setLevelHandler, getGridNode, findLoc,\n        disableInteraction, dropHandler };\n\n\n\n// WEBPACK FOOTER //\n// ./lib/utils.js"],"sourceRoot":""}